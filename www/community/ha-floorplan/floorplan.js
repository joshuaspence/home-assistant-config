var parcelRequire = undefined;
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ytxR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNodes=exports.reparentNodes=exports.isCEPolyfill=void 0;const e="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback;exports.isCEPolyfill=e;const o=(e,o,l=null,s=null)=>{for(;o!==l;){const l=o.nextSibling;e.insertBefore(o,s),o=l}};exports.reparentNodes=o;const l=(e,o,l=null)=>{for(;o!==l;){const l=o.nextSibling;e.removeChild(o),o=l}};exports.removeNodes=l;
},{}],"Av0K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lastAttributeNameRegex=exports.createMarker=exports.isTemplatePartActive=exports.Template=exports.boundAttributeSuffix=exports.markerRegex=exports.nodeMarker=exports.marker=void 0;const e=`{{lit-${String(Math.random()).slice(2)}}}`;exports.marker=e;const t=`\x3c!--${e}--\x3e`;exports.nodeMarker=t;const r=new RegExp(`${e}|${t}`);exports.markerRegex=r;const s="$lit$";exports.boundAttributeSuffix=s;class o{constructor(t,o){this.parts=[],this.element=o;const i=[],l=[],p=document.createTreeWalker(o.content,133,null,!1);let c=0,d=-1,u=0;const{strings:f,values:{length:h}}=t;for(;u<h;){const t=p.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:o}=e;let i=0;for(let t=0;t<o;t++)n(e[t].name,s)&&i++;for(;i-- >0;){const e=f[u],o=x.exec(e)[2],n=o.toLowerCase()+s,i=t.getAttribute(n);t.removeAttribute(n);const a=i.split(r);this.parts.push({type:"attribute",index:d,name:o,strings:a}),u+=a.length-1}}"TEMPLATE"===t.tagName&&(l.push(t),p.currentNode=t.content)}else if(3===t.nodeType){const o=t.data;if(o.indexOf(e)>=0){const e=t.parentNode,l=o.split(r),p=l.length-1;for(let r=0;r<p;r++){let o,i=l[r];if(""===i)o=a();else{const e=x.exec(i);null!==e&&n(e[2],s)&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-s.length)+e[3]),o=document.createTextNode(i)}e.insertBefore(o,t),this.parts.push({type:"node",index:++d})}""===l[p]?(e.insertBefore(a(),t),i.push(t)):t.data=l[p],u+=p}}else if(8===t.nodeType)if(t.data===e){const e=t.parentNode;null!==t.previousSibling&&d!==c||(d++,e.insertBefore(a(),t)),c=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(i.push(t),d--),u++}else{let r=-1;for(;-1!==(r=t.data.indexOf(e,r+1));)this.parts.push({type:"node",index:-1}),u++}}else p.currentNode=l.pop()}for(const e of i)e.parentNode.removeChild(e)}}exports.Template=o;const n=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},i=e=>-1!==e.index;exports.isTemplatePartActive=i;const a=()=>document.createComment("");exports.createMarker=a;const x=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;exports.lastAttributeNameRegex=x;
},{}],"NXoq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNodesFromTemplate=n,exports.insertNodeIntoTemplate=l;var e=require("./template.js");const t=133;function n(e,n){const{element:{content:r},parts:l}=e,u=document.createTreeWalker(r,t,null,!1);let c=o(l),d=l[c],s=-1,i=0;const a=[];let p=null;for(;u.nextNode();){s++;const e=u.currentNode;for(e.previousSibling===p&&(p=null),n.has(e)&&(a.push(e),null===p&&(p=e)),null!==p&&i++;void 0!==d&&d.index===s;)d.index=null!==p?-1:d.index-i,d=l[c=o(l,c)]}a.forEach(e=>e.parentNode.removeChild(e))}const r=e=>{let n=11===e.nodeType?0:1;const r=document.createTreeWalker(e,t,null,!1);for(;r.nextNode();)n++;return n},o=(t,n=-1)=>{for(let r=n+1;r<t.length;r++){const n=t[r];if((0,e.isTemplatePartActive)(n))return r}return-1};function l(e,n,l=null){const{element:{content:u},parts:c}=e;if(null==l)return void u.appendChild(n);const d=document.createTreeWalker(u,t,null,!1);let s=o(c),i=0,a=-1;for(;d.nextNode();){for(a++,d.currentNode===l&&(i=r(n),l.parentNode.insertBefore(n,l));-1!==s&&c[s].index===a;){if(i>0){for(;-1!==s;)c[s].index+=i,s=o(c,s);return}s=o(c,s)}}}
},{"./template.js":"Av0K"}],"uWh2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDirective=exports.directive=void 0;const e=new WeakMap,t=t=>(...s)=>{const i=t(...s);return e.set(i,!0),i};exports.directive=t;const s=t=>"function"==typeof t&&e.has(t);exports.isDirective=s;
},{}],"pnLb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nothing=exports.noChange=void 0;const e={};exports.noChange=e;const o={};exports.nothing=o;
},{}],"bn5t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplateInstance=void 0;var e=require("./dom.js"),t=require("./template.js");class s{constructor(e,t,s){this.__parts=[],this.template=e,this.processor=t,this.options=s}update(e){let t=0;for(const s of this.__parts)void 0!==s&&s.setValue(e[t]),t++;for(const s of this.__parts)void 0!==s&&s.commit()}_clone(){const s=e.isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),o=[],r=this.template.parts,n=document.createTreeWalker(s,133,null,!1);let i,p=0,l=0,a=n.nextNode();for(;p<r.length;)if(i=r[p],(0,t.isTemplatePartActive)(i)){for(;l<i.index;)l++,"TEMPLATE"===a.nodeName&&(o.push(a),n.currentNode=a.content),null===(a=n.nextNode())&&(n.currentNode=o.pop(),a=n.nextNode());if("node"===i.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,i.name,i.strings,this.options));p++}else this.__parts.push(void 0),p++;return e.isCEPolyfill&&(document.adoptNode(s),customElements.upgrade(s)),s}}exports.TemplateInstance=s;
},{"./dom.js":"ytxR","./template.js":"Av0K"}],"cVNN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGTemplateResult=exports.TemplateResult=void 0;var e=require("./dom.js"),t=require("./template.js");const s=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),r=` ${t.marker} `;class l{constructor(e,t,s,r){this.strings=e,this.values=t,this.type=s,this.processor=r}getHTML(){const e=this.strings.length-1;let s="",l=!1;for(let n=0;n<e;n++){const e=this.strings[n],i=e.lastIndexOf("\x3c!--");l=(i>-1||l)&&-1===e.indexOf("--\x3e",i+1);const o=t.lastAttributeNameRegex.exec(e);s+=null===o?e+(l?r:t.nodeMarker):e.substr(0,o.index)+o[1]+o[2]+t.boundAttributeSuffix+o[3]+t.marker}return s+=this.strings[e]}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==s&&(t=s.createHTML(t)),e.innerHTML=t,e}}exports.TemplateResult=l;class n extends l{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),s=t.content,r=s.firstChild;return s.removeChild(r),(0,e.reparentNodes)(s,r.firstChild),t}}exports.SVGTemplateResult=n;
},{"./dom.js":"ytxR","./template.js":"Av0K"}],"atl2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventPart=exports.PropertyPart=exports.PropertyCommitter=exports.BooleanAttributePart=exports.NodePart=exports.AttributePart=exports.AttributeCommitter=exports.isIterable=exports.isPrimitive=void 0;var t=require("./directive.js"),e=require("./dom.js"),i=require("./part.js"),s=require("./template-instance.js"),n=require("./template-result.js"),r=require("./template.js");const o=t=>null===t||!("object"==typeof t||"function"==typeof t);exports.isPrimitive=o;const a=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);exports.isIterable=a;class h{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let s=0;s<i.length-1;s++)this.parts[s]=this._createPart()}_createPart(){return new l(this)}_getValue(){const t=this.strings,e=t.length-1,i=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=i[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!a(t))return t}let s="";for(let n=0;n<e;n++){s+=t[n];const e=i[n];if(void 0!==e){const t=e.value;if(o(t)||!a(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}exports.AttributeCommitter=h;class l{constructor(t){this.value=void 0,this.committer=t}setValue(e){e===i.noChange||o(e)&&e===this.value||(this.value=e,(0,t.isDirective)(e)||(this.committer.dirty=!0))}commit(){for(;(0,t.isDirective)(this.value);){const t=this.value;this.value=i.noChange,t(this)}this.value!==i.noChange&&this.committer.commit()}}exports.AttributePart=l;class u{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild((0,r.createMarker)()),this.endNode=t.appendChild((0,r.createMarker)())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=(0,r.createMarker)()),t.__insert(this.endNode=(0,r.createMarker)())}insertAfterPart(t){t.__insert(this.startNode=(0,r.createMarker)()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}const e=this.__pendingValue;e!==i.noChange&&(o(e)?e!==this.value&&this.__commitText(e):e instanceof n.TemplateResult?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):a(e)?this.__commitIterable(e):e===i.nothing?(this.value=i.nothing,this.clear()):this.__commitText(e))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=i:this.__commitNode(document.createTextNode(i)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof s.TemplateInstance&&this.value.template===e)this.value.update(t.values);else{const i=new s.TemplateInstance(e,t.processor,this.options),n=i._clone();i.update(t.values),this.__commitNode(n),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,s=0;for(const n of t)void 0===(i=e[s])&&(i=new u(this.options),e.push(i),0===s?i.appendIntoPart(this):i.insertAfterPart(e[s-1])),i.setValue(n),i.commit(),s++;s<e.length&&(e.length=s,this.clear(i&&i.endNode))}clear(t=this.startNode){(0,e.removeNodes)(this.startNode.parentNode,t.nextSibling,this.endNode)}}exports.NodePart=u;class d{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}if(this.__pendingValue===i.noChange)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=i.noChange}}exports.BooleanAttributePart=d;class c extends h{constructor(t,e,i){super(t,e,i),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new p(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}exports.PropertyCommitter=c;class p extends l{}exports.PropertyPart=p;let _=!1;(()=>{try{const e={get capture(){return _=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(t){}})();class m{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=(t=>this.handleEvent(t))}setValue(t){this.__pendingValue=t}commit(){for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}if(this.__pendingValue===i.noChange)return;const e=this.__pendingValue,s=this.value,n=null==e||null!=s&&(e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive),r=null!=e&&(null==s||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=v(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=i.noChange}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}exports.EventPart=m;const v=t=>t&&(_?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
},{"./directive.js":"uWh2","./dom.js":"ytxR","./part.js":"pnLb","./template-instance.js":"bn5t","./template-result.js":"cVNN","./template.js":"Av0K"}],"gbKZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.templateFactory=t,exports.templateCaches=void 0;var e=require("./template.js");function t(t){let s=r.get(t.type);void 0===s&&(s={stringsArray:new WeakMap,keyString:new Map},r.set(t.type,s));let n=s.stringsArray.get(t.strings);if(void 0!==n)return n;const a=t.strings.join(e.marker);return void 0===(n=s.keyString.get(a))&&(n=new e.Template(t,t.getTemplateElement()),s.keyString.set(a,n)),s.stringsArray.set(t.strings,n),n}const r=new Map;exports.templateCaches=r;
},{"./template.js":"Av0K"}],"Fhpq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=exports.parts=void 0;var e=require("./dom.js"),t=require("./parts.js"),r=require("./template-factory.js");const s=new WeakMap;exports.parts=s;const o=(o,a,p)=>{let d=s.get(a);void 0===d&&((0,e.removeNodes)(a,a.firstChild),s.set(a,d=new t.NodePart(Object.assign({templateFactory:r.templateFactory},p))),d.appendInto(a)),d.setValue(o),d.commit()};exports.render=o;
},{"./dom.js":"ytxR","./parts.js":"atl2","./template-factory.js":"gbKZ"}],"LBiL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTemplateProcessor=exports.DefaultTemplateProcessor=void 0;var e=require("./parts.js");class t{handleAttributeExpressions(t,r,s,o){const a=r[0];if("."===a){return new e.PropertyCommitter(t,r.slice(1),s).parts}return"@"===a?[new e.EventPart(t,r.slice(1),o.eventContext)]:"?"===a?[new e.BooleanAttributePart(t,r.slice(1),s)]:new e.AttributeCommitter(t,r,s).parts}handleTextExpression(t){return new e.NodePart(t)}}exports.DefaultTemplateProcessor=t;const r=new t;exports.defaultTemplateProcessor=r;
},{"./parts.js":"atl2"}],"SPDu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DefaultTemplateProcessor",{enumerable:!0,get:function(){return e.DefaultTemplateProcessor}}),Object.defineProperty(exports,"defaultTemplateProcessor",{enumerable:!0,get:function(){return e.defaultTemplateProcessor}}),Object.defineProperty(exports,"SVGTemplateResult",{enumerable:!0,get:function(){return t.SVGTemplateResult}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return t.TemplateResult}}),Object.defineProperty(exports,"directive",{enumerable:!0,get:function(){return r.directive}}),Object.defineProperty(exports,"isDirective",{enumerable:!0,get:function(){return r.isDirective}}),Object.defineProperty(exports,"removeNodes",{enumerable:!0,get:function(){return n.removeNodes}}),Object.defineProperty(exports,"reparentNodes",{enumerable:!0,get:function(){return n.reparentNodes}}),Object.defineProperty(exports,"noChange",{enumerable:!0,get:function(){return o.noChange}}),Object.defineProperty(exports,"nothing",{enumerable:!0,get:function(){return o.nothing}}),Object.defineProperty(exports,"AttributeCommitter",{enumerable:!0,get:function(){return i.AttributeCommitter}}),Object.defineProperty(exports,"AttributePart",{enumerable:!0,get:function(){return i.AttributePart}}),Object.defineProperty(exports,"BooleanAttributePart",{enumerable:!0,get:function(){return i.BooleanAttributePart}}),Object.defineProperty(exports,"EventPart",{enumerable:!0,get:function(){return i.EventPart}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return i.isIterable}}),Object.defineProperty(exports,"isPrimitive",{enumerable:!0,get:function(){return i.isPrimitive}}),Object.defineProperty(exports,"NodePart",{enumerable:!0,get:function(){return i.NodePart}}),Object.defineProperty(exports,"PropertyCommitter",{enumerable:!0,get:function(){return i.PropertyCommitter}}),Object.defineProperty(exports,"PropertyPart",{enumerable:!0,get:function(){return i.PropertyPart}}),Object.defineProperty(exports,"parts",{enumerable:!0,get:function(){return u.parts}}),Object.defineProperty(exports,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(exports,"templateCaches",{enumerable:!0,get:function(){return p.templateCaches}}),Object.defineProperty(exports,"templateFactory",{enumerable:!0,get:function(){return p.templateFactory}}),Object.defineProperty(exports,"TemplateInstance",{enumerable:!0,get:function(){return a.TemplateInstance}}),Object.defineProperty(exports,"createMarker",{enumerable:!0,get:function(){return s.createMarker}}),Object.defineProperty(exports,"isTemplatePartActive",{enumerable:!0,get:function(){return s.isTemplatePartActive}}),Object.defineProperty(exports,"Template",{enumerable:!0,get:function(){return s.Template}}),exports.svg=exports.html=void 0;var e=require("./lib/default-template-processor.js"),t=require("./lib/template-result.js"),r=require("./lib/directive.js"),n=require("./lib/dom.js"),o=require("./lib/part.js"),i=require("./lib/parts.js"),u=require("./lib/render.js"),p=require("./lib/template-factory.js"),a=require("./lib/template-instance.js"),s=require("./lib/template.js");"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const l=(r,...n)=>new t.TemplateResult(r,n,"html",e.defaultTemplateProcessor);exports.html=l;const c=(r,...n)=>new t.SVGTemplateResult(r,n,"svg",e.defaultTemplateProcessor);exports.svg=c;
},{"./lib/default-template-processor.js":"LBiL","./lib/template-result.js":"cVNN","./lib/directive.js":"uWh2","./lib/dom.js":"ytxR","./lib/part.js":"pnLb","./lib/parts.js":"atl2","./lib/render.js":"Fhpq","./lib/template-factory.js":"gbKZ","./lib/template-instance.js":"bn5t","./lib/template.js":"Av0K"}],"eBH8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return a.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return a.svg}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return a.TemplateResult}}),exports.render=exports.shadyTemplateFactory=void 0;var e=require("./dom.js"),t=require("./modify-template.js"),r=require("./render.js"),o=require("./template-factory.js"),n=require("./template-instance.js"),s=require("./template.js"),a=require("../lit-html.js");const l=(e,t)=>`${e}--${t}`;let i=!0;void 0===window.ShadyCSS?i=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),i=!1);const d=e=>t=>{const r=l(t.type,e);let n=o.templateCaches.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},o.templateCaches.set(r,n));let a=n.stringsArray.get(t.strings);if(void 0!==a)return a;const d=t.strings.join(s.marker);if(void 0===(a=n.keyString.get(d))){const r=t.getTemplateElement();i&&window.ShadyCSS.prepareTemplateDom(r,e),a=new s.Template(t,r),n.keyString.set(d,a)}return n.stringsArray.set(t.strings,a),a};exports.shadyTemplateFactory=d;const p=["html","svg"],c=e=>{p.forEach(r=>{const n=o.templateCaches.get(l(r,e));void 0!==n&&n.keyString.forEach(e=>{const{element:{content:r}}=e,o=new Set;Array.from(r.querySelectorAll("style")).forEach(e=>{o.add(e)}),(0,t.removeNodesFromTemplate)(e,o)})})},m=new Set,y=(e,r,o)=>{m.add(e);const n=o?o.element:document.createElement("template"),s=r.querySelectorAll("style"),{length:a}=s;if(0===a)return void window.ShadyCSS.prepareTemplateStyles(n,e);const l=document.createElement("style");for(let t=0;t<a;t++){const e=s[t];e.parentNode.removeChild(e),l.textContent+=e.textContent}c(e);const i=n.content;o?(0,t.insertNodeIntoTemplate)(o,l,i.firstChild):i.insertBefore(l,i.firstChild),window.ShadyCSS.prepareTemplateStyles(n,e);const d=i.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==d)r.insertBefore(d.cloneNode(!0),r.firstChild);else if(o){i.insertBefore(l,i.firstChild);const e=new Set;e.add(l),(0,t.removeNodesFromTemplate)(o,e)}},S=(t,o,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const a=s.scopeName,l=r.parts.has(o),p=i&&11===o.nodeType&&!!o.host,c=p&&!m.has(a),S=c?document.createDocumentFragment():o;if((0,r.render)(t,S,Object.assign({templateFactory:d(a)},s)),c){const t=r.parts.get(S);r.parts.delete(S);const s=t.value instanceof n.TemplateInstance?t.value.template:void 0;y(a,S,s),(0,e.removeNodes)(o,o.firstChild),o.appendChild(S),r.parts.set(o,t)}!l&&p&&window.ShadyCSS.styleElement(o.host)};exports.render=S;
},{"./dom.js":"ytxR","./modify-template.js":"NXoq","./render.js":"Fhpq","./template-factory.js":"gbKZ","./template-instance.js":"bn5t","./template.js":"Av0K","../lit-html.js":"SPDu"}],"fKvB":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdatingElement=exports.notEqual=exports.defaultConverter=void 0,window.JSCompiler_renameProperty=((t,e)=>t);const e={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}};exports.defaultConverter=e;const r=(t,e)=>e!==t&&(e==e||t==t);exports.notEqual=r;const s={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:r},i=1,a=4,o=8,p=16,n="finalized";class h extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,r)=>{const s=this._attributeNameForProperty(r,e);void 0!==s&&(this._attributeToPropertyMap.set(s,r),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=s){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,r,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(s){const i=this[t];this[e]=s,this.requestUpdateInternal(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||s}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(n)||t.finalize(),this[n]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,s=r){return s(t,e)}static _propertyValueFromAttribute(t,r){const s=r.type,i=r.converter||e,a="function"==typeof i?i:i.fromAttribute;return a?a(t,s):t}static _propertyValueToAttribute(t,r){if(void 0===r.reflect)return;const s=r.type,i=r.converter;return(i&&i.toAttribute||e.toAttribute)(t,s)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=s){const i=this.constructor,a=i._attributeNameForProperty(t,r);if(void 0!==a){const t=i._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=this._updateState|o,null==t?this.removeAttribute(a):this.setAttribute(a,t),this._updateState=this._updateState&~o}}_attributeToProperty(t,e){if(this._updateState&o)return;const r=this.constructor,s=r._attributeToPropertyMap.get(t);if(void 0!==s){const t=r.getPropertyOptions(s);this._updateState=this._updateState|p,this[s]=r._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~p}}requestUpdateInternal(t,e,r){let s=!0;if(void 0!==t){const i=this.constructor;r=r||i.getPropertyOptions(t),i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||this._updateState&p||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):s=!1}!this._hasRequestedUpdate&&s&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|a;try{await this._updatePromise}catch(e){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&a}get hasUpdated(){return this._updateState&i}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{(t=this.shouldUpdate(e))?this.update(e):this._markUpdated()}catch(r){throw t=!1,this._markUpdated(),r}t&&(this._updateState&i||(this._updateState=this._updateState|i,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~a}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}exports.UpdatingElement=h,h[t=n]=!0;
},{}],"FzpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.property=i,exports.internalProperty=s,exports.query=c,exports.queryAsync=u,exports.queryAll=l,exports.eventOptions=f,exports.queryAssignedNodes=b,exports.customElement=void 0;const e=(e,t)=>(window.customElements.define(e,t),t),t=(e,t)=>{const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){window.customElements.define(e,t)}}},r=r=>n=>"function"==typeof n?e(r,n):t(r,n);exports.customElement=r;const n=(e,t)=>"method"!==t.kind||!t.descriptor||"value"in t.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}}:Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}),o=(e,t,r)=>{t.constructor.createProperty(r,e)};function i(e){return(t,r)=>void 0!==r?o(e,t,r):n(e,t)}function s(e){return i({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}function c(e,t){return(r,n)=>{const o={get(){return this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof n?Symbol():`__${n}`;o.get=function(){return void 0===this[t]&&(this[t]=this.renderRoot.querySelector(e)),this[t]}}return void 0!==n?a(o,r,n):d(o,r)}}function u(e){return(t,r)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};return void 0!==r?a(n,t,r):d(n,t)}}function l(e){return(t,r)=>{const n={get(){return this.renderRoot.querySelectorAll(e)},enumerable:!0,configurable:!0};return void 0!==r?a(n,t,r):d(n,t)}}const a=(e,t,r)=>{Object.defineProperty(t,r,e)},d=(e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}),p=(e,t)=>Object.assign(Object.assign({},t),{finisher(r){Object.assign(r.prototype[t.key],e)}}),y=(e,t,r)=>{Object.assign(t[r],e)};function f(e){return(t,r)=>void 0!==r?y(e,t,r):p(e,t)}const m=Element.prototype,h=m.msMatchesSelector||m.webkitMatchesSelector;function b(e="",t=!1,r=""){return(n,o)=>{const i={get(){const n=`slot${e?`[name=${e}]`:":not([name])"}`,o=this.renderRoot.querySelector(n);let i=o&&o.assignedNodes({flatten:t});return i&&r&&(i=i.filter(e=>e.nodeType===Node.ELEMENT_NODE&&e.matches?e.matches(r):h.call(e,r))),i},enumerable:!0,configurable:!0};return void 0!==o?a(i,n,o):d(i,n)}}
},{}],"ZFCR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.css=exports.unsafeCSS=exports.CSSResult=exports.supportsAdoptingStyleSheets=void 0;const e=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;exports.supportsAdoptingStyleSheets=e;const t=Symbol();class s{constructor(e,s){if(s!==t)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(e?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}exports.CSSResult=s;const o=e=>new s(String(e),t);exports.unsafeCSS=o;const r=e=>{if(e instanceof s)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)},n=(e,...o)=>{const n=o.reduce((t,s,o)=>t+r(s)+e[o+1],e[0]);return new s(n,t)};exports.css=n;
},{}],"bhxD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={LitElement:!0,html:!0,svg:!0,TemplateResult:!0,SVGTemplateResult:!0};Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return n.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return n.svg}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return n.TemplateResult}}),Object.defineProperty(exports,"SVGTemplateResult",{enumerable:!0,get:function(){return n.SVGTemplateResult}}),exports.LitElement=void 0;var t=require("lit-html/lib/shady-render.js"),s=require("./lib/updating-element.js");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===s[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var r=require("./lib/decorators.js");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var n=require("lit-html/lit-html.js"),o=require("./lib/css-tag.js");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))}),(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const i={};class l extends s.UpdatingElement{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,s)=>e.reduceRight((e,s)=>Array.isArray(s)?t(s,e):(e.add(s),e),s),s=t(e,new Set),r=[];s.forEach(e=>r.unshift(e)),this._styles=r}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!o.supportsAdoptingStyleSheets){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return(0,o.unsafeCSS)(t)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?o.supportsAdoptingStyleSheets?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==i&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return i}}exports.LitElement=l,l.finalized=!0,l.render=t.render;
},{"lit-html/lib/shady-render.js":"eBH8","./lib/updating-element.js":"fKvB","./lib/decorators.js":"FzpZ","lit-html/lit-html.js":"SPDu","./lib/css-tag.js":"ZFCR"}],"uXqs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fireEvent=void 0;const e=(e,o,t,s)=>{s=s||{},t=null==t?{}:t;const l=new Event(o,{bubbles:void 0===s.bubbles||s.bubbles,cancelable:Boolean(s.cancelable),composed:void 0===s.composed||s.composed});return l.detail=t,e.dispatchEvent(l),l};exports.fireEvent=e;
},{}],"q0Uk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.navigate=void 0;var e=require("./dom/fire_event");const t=(t,r,o=!1)=>{o?history.replaceState(null,"",r):history.pushState(null,"",r),(0,e.fireEvent)(window,"location-changed",{replace:o})};exports.navigate=t;
},{"./dom/fire_event":"uXqs"}],"YaK1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanClickContext=exports.FloorplanEntityInfo=exports.FloorplanRuleInfo=exports.FloorplanSvgElementInfo=exports.FloorplanElementInfo=exports.FloorplanPageInfo=void 0;class o{}exports.FloorplanPageInfo=o;class t{}exports.FloorplanElementInfo=t;class s{constructor(o,t,s,e,l,n,r){this.entityId=o,this.svgElement=t,this.originalSvgElement=s,this.originalClasses=e,this.originalStyles=l,this.originalBBox=n,this.originalClientRect=r}}exports.FloorplanSvgElementInfo=s;class e{constructor(o){this.rule=o,this.svgElementInfos={}}}exports.FloorplanRuleInfo=e;class l{}exports.FloorplanEntityInfo=l;class n{constructor(o,t,s,e,l,n){this.instance=o,this.entityId=t,this.elementId=s,this.svgElementInfo=e,this.ruleInfo=l,this.actions=n}}exports.FloorplanClickContext=n;
},{}],"QJxt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={},n={};n.click=n.mousedown=n.mouseup=n.mousemove="MouseEvents";var t=1;function r(e){return e._dtId||(e._dtId=t++)}function a(e){var n=e.indexOf(".");return n>0?{e:e.substring(0,e.indexOf(".")),ns:e.substring(n+1,e.length)}:{e:e}}function o(n,t,o,c){return o=a(o),(e[r(n)]||[]).filter(function(e){return e&&(!o.e||e.e===o.e)&&(!o.ns||e.ns===o.ns)&&(!c||e.callback===c)&&(!t||e.selector===t)})}function c(n,t,c,i){var u=a(c).e;if(!n._dtId)return!1;var l=e[r(n)];o(n,t,c,i).forEach(function(e){n.removeEventListener?n.removeEventListener(u,e.delegator||e.callback):n.detachEvent&&n.detachEvent("on"+u,e.delegator||e.callback),l.splice(l.indexOf(e),1)})}function i(n,t,o,c,i){var u=a(o).e,l=a(o).ns;n.addEventListener?n.addEventListener(u,i||c,!1):n.attachEvent&&n.attachEvent("on"+u,i||c);var s=r(n);(e[s]||(e[s]=[])).push({delegator:i,callback:c,e:u,ns:l,selector:t})}var u={on:function(e,n,t){i(e,null,n,t)},off:function(e,n,t){c(e,null,n,t)},once:function(e,n,t){this.on(e,n,function e(n){return u.off(n.currentTarget,n.type,e),t(n)})},delegate:function(e,n,t,r){i(e,n,t,r,function(t){for(var a=e.querySelectorAll(n),o=!1,c=0;c<a.length;c++){var i=a[c];if(i===t.target||i.contains(t.target)){o=i;break}}o&&r.apply(o,[].slice.call(arguments))})},undelegate:function(e,n,t,r){c(e,n,t,r)},trigger:function(e,t,r){var a=document.createEvent(n[t]||"Events"),o=!0;if(r)for(var c in r)({}).hasOwnProperty.call(r,c)&&("bubbles"===c?o=!!r[c]:a[c]=r[c]);a.initEvent(t,o,!0),e.dispatchEvent(a)}};exports.default=u;
},{}],"SGKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LongClicks=void 0;var t=o(require("oui-dom-events"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=e();if(o&&o.has(t))return o.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=i?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=t[s]}return n.default=t,o&&o.set(t,n),n}const n=t.default;class i{static observe(t){let e,o=!1;const i=()=>{console.log("onTapStart: isLongClick:",o),o=!1,e=setTimeout(()=>{o=!0,console.log("timer timed out: isLongClick:",o),console.log("timer timed out: dispatching event:","longClick"),t.dispatchEvent(new Event("longClick"))},400)},s=n=>{clearTimeout(e),o?console.log("onTapEnd: isLongClick:",o):(console.log("onTapEnd: dispatching event:","short"+n.type[0].toUpperCase()+n.type.slice(1)),t.dispatchEvent(new Event("short"+n.type[0].toUpperCase()+n.type.slice(1))))},r=t=>{o&&(console.log("onTap: isLongClick:",o),t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation())};n.on(t,"mousedown",i.bind(this)),n.on(t,"tapstart",i.bind(this)),n.on(t,"touchstart",i.bind(this)),n.on(t,"click",s.bind(this)),n.on(t,"mouseup",s.bind(this)),n.on(t,"tapend",s.bind(this)),n.on(t,"touchend",s.bind(this)),n.on(t,"tap",r.bind(this)),n.on(t,"touch",r.bind(this)),n.on(t,"mouseup",r.bind(this)),n.on(t,"tapend",r.bind(this)),n.on(t,"touchend",r.bind(this)),n.on(t,"click",(t=>{console.log("onClick: isLongClick:",o),t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation()}).bind(this))}}exports.LongClicks=i;
},{"oui-dom-events":"QJxt"}],"Toml":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorUtil=void 0;class t{static miredToRGB(t){return this.kelvinToRGB(1e6/t)}static kelvinToRGB(t){const o=t/100;let a,e,r;return o<=66?(a=255,e=o,e=99.4708025861*Math.log(e)-161.1195681661,o<=19?r=0:(r=o-10,r=138.5177312231*Math.log(r)-305.0447927307)):(a=o-60,a=329.698727446*Math.pow(a,-.1332047592),e=o-60,e=288.1221695283*Math.pow(e,-.0755148492),r=255),[Math.min(Math.max(Math.round(a),0),255),Math.min(Math.max(Math.round(e),0),255),Math.min(Math.max(Math.round(r),0),255)]}}exports.ColorUtil=t;
},{}],"ReJd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EvalHelper=void 0;var e=require("./color-util");class t{static evaluate(t,i,s,n,a){const l=n?i.states[n]:void 0;let r,c=t.trim();if(c.startsWith(">")?c=c.slice(">".length).trim():c.indexOf("${")>=0&&(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,c.length-2)),(c=`\`${c=c.replace(/\\"/g,'"')}\`;`).indexOf("return")<0&&(c=`return ${c}`)),this.evaluateFunctionCache[c])r=this.evaluateFunctionCache[c];else{const e=new Function("entity","entities","hass","config","element","util",c);this.evaluateFunctionCache[c]=e,r=e}const o={color:e.ColorUtil};return r(l,i.states,i,s,a,o)}}exports.EvalHelper=t,t.evaluateFunctionCache={};
},{"./color-util":"Toml"}],"dLxY":[function(require,module,exports) {
function l(l,n,u){var e,t,o,a,r;function i(){var c=Date.now()-a;c<n&&c>=0?e=setTimeout(i,n-c):(e=null,u||(r=l.apply(o,t),o=t=null))}null==n&&(n=100);var c=function(){o=this,t=arguments,a=Date.now();var c=u&&!e;return e||(e=setTimeout(i,n)),c&&(r=l.apply(o,t),o=t=null),r};return c.clear=function(){e&&(clearTimeout(e),e=null)},c.flush=function(){e&&(r=l.apply(o,t),o=t=null,clearTimeout(e),e=null)},c}l.debounce=l,module.exports=l;
},{}],"eIWs":[function(require,module,exports) {
"use strict";function e(e){return null==e}function t(e){return"object"==typeof e&&null!==e}function n(t){return Array.isArray(t)?t:e(t)?[]:[t]}function i(e,t){var n,i,r,o;if(t)for(n=0,i=(o=Object.keys(t)).length;n<i;n+=1)e[r=o[n]]=t[r];return e}function r(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i}function o(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.safeLoadAll=exports.safeLoad=exports.safeDump=exports.loadAll=exports.load=exports.dump=exports.YAMLException=exports.Type=exports.Schema=exports.JSON_SCHEMA=exports.FAILSAFE_SCHEMA=exports.DEFAULT_SCHEMA=exports.CORE_SCHEMA=exports.default=void 0;var a=e,l=t,s=n,c=r,u=o,p=i,f={isNothing:a,isObject:l,toArray:s,repeat:c,isNegativeZero:u,extend:p};function d(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),i+" "+n):i}function h(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=d(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.toString=function(e){return this.name+": "+d(this,e)};var g=h;function m(e,t,n,i,r){var o="",a="",l=Math.floor(r/2)-1;return i-t>l&&(t=i-l+(o=" ... ").length),n-i>l&&(n=i+l-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+a,pos:i-t+o.length}}function y(e,t){return f.repeat(" ",t-e.length)+e}function A(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,i=/\r?\n|\r|\0/g,r=[0],o=[],a=-1;n=i.exec(e.buffer);)o.push(n.index),r.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l,s,c="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,p=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)s=m(e.buffer,r[a-l],o[a-l],e.position-(r[a]-r[a-l]),p),c=f.repeat(" ",t.indent)+y((e.line-l+1).toString(),u)+" | "+s.str+"\n"+c;for(s=m(e.buffer,r[a],o[a],e.position,p),c+=f.repeat(" ",t.indent)+y((e.line+1).toString(),u)+" | "+s.str+"\n",c+=f.repeat("-",t.indent+u+3+s.pos)+"^\n",l=1;l<=t.linesAfter&&!(a+l>=o.length);l++)s=m(e.buffer,r[a+l],o[a+l],e.position-(r[a]-r[a+l]),p),c+=f.repeat(" ",t.indent)+y((e.line+l+1).toString(),u)+" | "+s.str+"\n";return c.replace(/\n$/,"")}var v=A,b=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],x=["scalar","sequence","mapping"];function w(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function C(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===b.indexOf(t))throw new g('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=w(t.styleAliases||null),-1===x.indexOf(this.kind))throw new g('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var k=C;function I(e,t,n){var i=[];return e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&t.kind===e.kind&&t.multi===e.multi&&i.push(n)}),n.push(e)}),n.filter(function(e,t){return-1===i.indexOf(t)})}function S(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}function O(e){return this.extend(e)}O.prototype.extend=function(e){var t=[],n=[];if(e instanceof k)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new g("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach(function(e){if(!(e instanceof k))throw new g("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new g("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new g("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof k))throw new g("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(O.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=I(i,"implicit",[]),i.compiledExplicit=I(i,"explicit",[]),i.compiledTypeMap=S(i.compiledImplicit,i.compiledExplicit),i};var j=O,T=new k("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),E=new k("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),M=new k("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),F=new j({explicit:[T,E,M]});function L(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function N(){return null}function _(e){return null===e}var D=new k("tag:yaml.org,2002:null",{kind:"scalar",resolve:L,construct:N,predicate:_,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function U(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function Y(e){return"true"===e||"True"===e||"TRUE"===e}function q(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var R=new k("tag:yaml.org,2002:bool",{kind:"scalar",resolve:U,construct:Y,predicate:q,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function H(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function B(e){return 48<=e&&e<=55}function K(e){return 48<=e&&e<=57}function P(e){if(null===e)return!1;var t,n=e.length,i=0,r=!1;if(!n)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===n)return!0;if("b"===(t=e[++i])){for(i++;i<n;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!H(e.charCodeAt(i)))return!1;r=!0}return r&&"_"!==t}if("o"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!B(e.charCodeAt(i)))return!1;r=!0}return r&&"_"!==t}}if("_"===t)return!1;for(;i<n;i++)if("_"!==(t=e[i])){if(!K(e.charCodeAt(i)))return!1;r=!0}return!(!r||"_"===t)}function W(e){var t,n=e,i=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return i*parseInt(n.slice(2),2);if("x"===n[1])return i*parseInt(n.slice(2),16);if("o"===n[1])return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)}function $(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!f.isNegativeZero(e)}var G=new k("tag:yaml.org,2002:int",{kind:"scalar",resolve:P,construct:W,predicate:$,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),V=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Z(e){return null!==e&&!(!V.test(e)||"_"===e[e.length-1])}function J(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)}var Q=/^[-+]?[0-9]+e/;function z(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(f.isNegativeZero(e))return"-0.0";return n=e.toString(10),Q.test(n)?n.replace("e",".e"):n}function X(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||f.isNegativeZero(e))}var ee=new k("tag:yaml.org,2002:float",{kind:"scalar",resolve:Z,construct:J,predicate:X,represent:z,defaultStyle:"lowercase"}),te=F.extend({implicit:[D,R,G,ee]}),ne=te,ie=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),re=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function oe(e){return null!==e&&(null!==ie.exec(e)||null!==re.exec(e))}function ae(e){var t,n,i,r,o,a,l,s,c=0,u=null;if(null===(t=ie.exec(e))&&(t=re.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),s=new Date(Date.UTC(n,i,r,o,a,l,c)),u&&s.setTime(s.getTime()-u),s}function le(e){return e.toISOString()}var se=new k("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:oe,construct:ae,instanceOf:Date,represent:le});function ce(e){return"<<"===e||null===e}var ue=new k("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ce}),pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function fe(e){if(null===e)return!1;var t,n,i=0,r=e.length,o=pe;for(n=0;n<r;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0}function de(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,o=pe,a=0,l=[];for(t=0;t<r;t++)t%4==0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)),a=a<<6|o.indexOf(i.charAt(t));return 0===(n=r%4*6)?(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)):18===n?(l.push(a>>10&255),l.push(a>>2&255)):12===n&&l.push(a>>4&255),new Uint8Array(l)}function he(e){var t,n,i="",r=0,o=e.length,a=pe;for(t=0;t<o;t++)t%3==0&&t&&(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]),r=(r<<8)+e[t];return 0===(n=o%3)?(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]):2===n?(i+=a[r>>10&63],i+=a[r>>4&63],i+=a[r<<2&63],i+=a[64]):1===n&&(i+=a[r>>2&63],i+=a[r<<4&63],i+=a[64],i+=a[64]),i}function ge(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}var me=new k("tag:yaml.org,2002:binary",{kind:"scalar",resolve:fe,construct:de,predicate:ge,represent:he}),ye=Object.prototype.hasOwnProperty,Ae=Object.prototype.toString;function ve(e){if(null===e)return!0;var t,n,i,r,o,a=[],l=e;for(t=0,n=l.length;t<n;t+=1){if(i=l[t],o=!1,"[object Object]"!==Ae.call(i))return!1;for(r in i)if(ye.call(i,r)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(r))return!1;a.push(r)}return!0}function be(e){return null!==e?e:[]}var xe=new k("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ve,construct:be}),we=Object.prototype.toString;function Ce(e){if(null===e)return!0;var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(i=a[t],"[object Object]"!==we.call(i))return!1;if(1!==(r=Object.keys(i)).length)return!1;o[t]=[r[0],i[r[0]]]}return!0}function ke(e){if(null===e)return[];var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)i=a[t],r=Object.keys(i),o[t]=[r[0],i[r[0]]];return o}var Ie=new k("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ce,construct:ke}),Se=Object.prototype.hasOwnProperty;function Oe(e){if(null===e)return!0;var t,n=e;for(t in n)if(Se.call(n,t)&&null!==n[t])return!1;return!0}function je(e){return null!==e?e:{}}var Te=new k("tag:yaml.org,2002:set",{kind:"mapping",resolve:Oe,construct:je}),Ee=ne.extend({implicit:[se,ue],explicit:[me,xe,Ie,Te]}),Me=Object.prototype.hasOwnProperty,Fe=1,Le=2,Ne=3,_e=4,De=1,Ue=2,Ye=3,qe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Re=/[\x85\u2028\u2029]/,He=/[,\[\]\{\}]/,Be=/^(?:!|!!|![a-z\-]+!)$/i,Ke=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Pe(e){return Object.prototype.toString.call(e)}function We(e){return 10===e||13===e}function $e(e){return 9===e||32===e}function Ge(e){return 9===e||32===e||10===e||13===e}function Ve(e){return 44===e||91===e||93===e||123===e||125===e}function Ze(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Je(e){return 120===e?2:117===e?4:85===e?8:0}function Qe(e){return 48<=e&&e<=57?e-48:-1}function ze(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function Xe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var et=new Array(256),tt=new Array(256),nt=0;nt<256;nt++)et[nt]=ze(nt)?1:0,tt[nt]=ze(nt);function it(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ee,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function rt(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=v(n),new g(t,n)}function ot(e,t){throw rt(e,t)}function at(e,t){e.onWarning&&e.onWarning.call(null,rt(e,t))}var lt={YAML:function(e,t,n){var i,r,o;null!==e.version&&ot(e,"duplication of %YAML directive"),1!==n.length&&ot(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&ot(e,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),o=parseInt(i[2],10),1!==r&&ot(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&at(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,r;2!==n.length&&ot(e,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],Be.test(i)||ot(e,"ill-formed tag handle (first argument) of the TAG directive"),Me.call(e.tagMap,i)&&ot(e,'there is a previously declared suffix for "'+i+'" tag handle'),Ke.test(r)||ot(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(o){ot(e,"tag prefix is malformed: "+r)}e.tagMap[i]=r}};function st(e,t,n,i){var r,o,a,l;if(t<n){if(l=e.input.slice(t,n),i)for(r=0,o=l.length;r<o;r+=1)9===(a=l.charCodeAt(r))||32<=a&&a<=1114111||ot(e,"expected valid JSON character");else qe.test(l)&&ot(e,"the stream contains non-printable characters");e.result+=l}}function ct(e,t,n,i){var r,o,a,l;for(f.isObject(n)||ot(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,l=(r=Object.keys(n)).length;a<l;a+=1)o=r[a],Me.call(t,o)||(t[o]=n[o],i[o]=!0)}function ut(e,t,n,i,r,o,a,l,s){var c,u;if(Array.isArray(r))for(c=0,u=(r=Array.prototype.slice.call(r)).length;c<u;c+=1)Array.isArray(r[c])&&ot(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===Pe(r[c])&&(r[c]="[object Object]");if("object"==typeof r&&"[object Object]"===Pe(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)ct(e,t,o[c],n);else ct(e,t,o,n);else e.json||Me.call(n,r)||!Me.call(t,r)||(e.line=a||e.line,e.lineStart=l||e.lineStart,e.position=s||e.position,ot(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[r]=o,delete n[r];return t}function pt(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):ot(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ft(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);0!==r;){for(;$e(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!We(r))break;for(pt(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==i&&e.lineIndent<n&&at(e,"deficient indentation"),i}function dt(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Ge(t)))}function ht(e,t){1===t?e.result+=" ":t>1&&(e.result+=f.repeat("\n",t-1))}function gt(e,t,n){var i,r,o,a,l,s,c,u,p=e.kind,f=e.result;if(Ge(u=e.input.charCodeAt(e.position))||Ve(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(Ge(i=e.input.charCodeAt(e.position+1))||n&&Ve(i)))return!1;for(e.kind="scalar",e.result="",r=o=e.position,a=!1;0!==u;){if(58===u){if(Ge(i=e.input.charCodeAt(e.position+1))||n&&Ve(i))break}else if(35===u){if(Ge(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&dt(e)||n&&Ve(u))break;if(We(u)){if(l=e.line,s=e.lineStart,c=e.lineIndent,ft(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=l,e.lineStart=s,e.lineIndent=c;break}}a&&(st(e,r,o,!1),ht(e,e.line-l),r=o=e.position,a=!1),$e(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return st(e,r,o,!1),!!e.result||(e.kind=p,e.result=f,!1)}function mt(e,t){var n,i,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(st(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,r=e.position}else We(n)?(st(e,i,r,!0),ht(e,ft(e,!1,t)),i=r=e.position):e.position===e.lineStart&&dt(e)?ot(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);ot(e,"unexpected end of the stream within a single quoted scalar")}function yt(e,t){var n,i,r,o,a,l;if(34!==(l=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(l=e.input.charCodeAt(e.position));){if(34===l)return st(e,n,e.position,!0),e.position++,!0;if(92===l){if(st(e,n,e.position,!0),We(l=e.input.charCodeAt(++e.position)))ft(e,!1,t);else if(l<256&&et[l])e.result+=tt[l],e.position++;else if((a=Je(l))>0){for(r=a,o=0;r>0;r--)(a=Ze(l=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:ot(e,"expected hexadecimal character");e.result+=Xe(o),e.position++}else ot(e,"unknown escape sequence");n=i=e.position}else We(l)?(st(e,n,i,!0),ht(e,ft(e,!1,t)),n=i=e.position):e.position===e.lineStart&&dt(e)?ot(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ot(e,"unexpected end of the stream within a double quoted scalar")}function At(e,t){var n,i,r,o,a,l,s,c,u,p,f,d,h=!0,g=e.tag,m=e.anchor,y=Object.create(null);if(91===(d=e.input.charCodeAt(e.position)))a=93,c=!1,o=[];else{if(123!==d)return!1;a=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),d=e.input.charCodeAt(++e.position);0!==d;){if(ft(e,!0,t),(d=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=g,e.anchor=m,e.kind=c?"mapping":"sequence",e.result=o,!0;h?44===d&&ot(e,"expected the node content, but found ','"):ot(e,"missed comma between flow collection entries"),f=null,l=s=!1,63===d&&Ge(e.input.charCodeAt(e.position+1))&&(l=s=!0,e.position++,ft(e,!0,t)),n=e.line,i=e.lineStart,r=e.position,It(e,t,Fe,!1,!0),p=e.tag,u=e.result,ft(e,!0,t),d=e.input.charCodeAt(e.position),!s&&e.line!==n||58!==d||(l=!0,d=e.input.charCodeAt(++e.position),ft(e,!0,t),It(e,t,Fe,!1,!0),f=e.result),c?ut(e,o,y,p,u,f,n,i,r):l?o.push(ut(e,null,y,p,u,f,n,i,r)):o.push(u),ft(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(h=!0,d=e.input.charCodeAt(++e.position)):h=!1}ot(e,"unexpected end of the stream within a flow collection")}function vt(e,t){var n,i,r,o,a=De,l=!1,s=!1,c=t,u=0,p=!1;if(124===(o=e.input.charCodeAt(e.position)))i=!1;else{if(62!==o)return!1;i=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)De===a?a=43===o?Ye:Ue:ot(e,"repeat of a chomping mode identifier");else{if(!((r=Qe(o))>=0))break;0===r?ot(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ot(e,"repeat of an indentation width identifier"):(c=t+r-1,s=!0)}if($e(o)){do{o=e.input.charCodeAt(++e.position)}while($e(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!We(o)&&0!==o)}for(;0!==o;){for(pt(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!s||e.lineIndent<c)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>c&&(c=e.lineIndent),We(o))u++;else{if(e.lineIndent<c){a===Ye?e.result+=f.repeat("\n",l?1+u:u):a===De&&l&&(e.result+="\n");break}for(i?$e(o)?(p=!0,e.result+=f.repeat("\n",l?1+u:u)):p?(p=!1,e.result+=f.repeat("\n",u+1)):0===u?l&&(e.result+=" "):e.result+=f.repeat("\n",u):e.result+=f.repeat("\n",l?1+u:u),l=!0,s=!0,u=0,n=e.position;!We(o)&&0!==o;)o=e.input.charCodeAt(++e.position);st(e,n,e.position,!1)}}return!0}function bt(e,t){var n,i,r=e.tag,o=e.anchor,a=[],l=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),i=e.input.charCodeAt(e.position);0!==i&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,ot(e,"tab characters must not be used in indentation")),45===i)&&Ge(e.input.charCodeAt(e.position+1));)if(l=!0,e.position++,ft(e,!0,-1)&&e.lineIndent<=t)a.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,It(e,t,Ne,!1,!0),a.push(e.result),ft(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)ot(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!l&&(e.tag=r,e.anchor=o,e.kind="sequence",e.result=a,!0)}function xt(e,t,n){var i,r,o,a,l,s,c,u=e.tag,p=e.anchor,f={},d=Object.create(null),h=null,g=null,m=null,y=!1,A=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=f),c=e.input.charCodeAt(e.position);0!==c;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,ot(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!Ge(i)){if(a=e.line,l=e.lineStart,s=e.position,!It(e,n,Le,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);$e(c);)c=e.input.charCodeAt(++e.position);if(58===c)Ge(c=e.input.charCodeAt(++e.position))||ot(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(ut(e,f,d,h,g,null,a,l,s),h=g=m=null),A=!0,y=!1,r=!1,h=e.tag,g=e.result;else{if(!A)return e.tag=u,e.anchor=p,!0;ot(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!A)return e.tag=u,e.anchor=p,!0;ot(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(y&&(ut(e,f,d,h,g,null,a,l,s),h=g=m=null),A=!0,y=!0,r=!0):y?(y=!1,r=!0):ot(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=i;if((e.line===o||e.lineIndent>t)&&(y&&(a=e.line,l=e.lineStart,s=e.position),It(e,t,_e,!0,r)&&(y?g=e.result:m=e.result),y||(ut(e,f,d,h,g,m,a,l,s),h=g=m=null),ft(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)ot(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&ut(e,f,d,h,g,null,a,l,s),A&&(e.tag=u,e.anchor=p,e.kind="mapping",e.result=f),A}function wt(e){var t,n,i,r,o=!1,a=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&ot(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(o=!0,r=e.input.charCodeAt(++e.position)):33===r?(a=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(i=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):ot(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!Ge(r);)33===r&&(a?ot(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Be.test(n)||ot(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),He.test(i)&&ot(e,"tag suffix cannot contain flow indicator characters")}i&&!Ke.test(i)&&ot(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch(l){ot(e,"tag name is malformed: "+i)}return o?e.tag=i:Me.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:ot(e,'undeclared tag handle "'+n+'"'),!0}function Ct(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&ot(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Ge(n)&&!Ve(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ot(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function kt(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!Ge(i)&&!Ve(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ot(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Me.call(e.anchorMap,n)||ot(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],ft(e,!0,-1),!0}function It(e,t,n,i,r){var o,a,l,s,c,u,p,f,d,h=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=l=_e===n||Ne===n,i&&ft(e,!0,-1)&&(g=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;wt(e)||Ct(e);)ft(e,!0,-1)?(g=!0,l=o,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):l=!1;if(l&&(l=g||r),1!==h&&_e!==n||(f=Fe===n||Le===n?t:t+1,d=e.position-e.lineStart,1===h?l&&(bt(e,d)||xt(e,d,f))||At(e,f)?m=!0:(a&&vt(e,f)||mt(e,f)||yt(e,f)?m=!0:kt(e)?(m=!0,null===e.tag&&null===e.anchor||ot(e,"alias node should not have any properties")):gt(e,f,Fe===n)&&(m=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(m=l&&bt(e,d))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&ot(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),s=0,c=e.implicitTypes.length;s<c;s+=1)if((p=e.implicitTypes[s]).resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Me.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,s=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;s<c;s+=1)if(e.tag.slice(0,u[s].tag.length)===u[s].tag){p=u[s];break}p||ot(e,"unknown tag !<"+e.tag+">"),null!==e.result&&p.kind!==e.kind&&ot(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):ot(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function St(e){var t,n,i,r,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(ft(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(a=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Ge(r);)r=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&ot(e,"directive name must not be less than one character in length");0!==r;){for(;$e(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!We(r));break}if(We(r))break;for(t=e.position;0!==r&&!Ge(r);)r=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==r&&pt(e),Me.call(lt,n)?lt[n](e,n,i):at(e,'unknown document directive "'+n+'"')}ft(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,ft(e,!0,-1)):a&&ot(e,"directives end mark is expected"),It(e,e.lineIndent-1,_e,!1,!0),ft(e,!0,-1),e.checkLineBreaks&&Re.test(e.input.slice(o,e.position))&&at(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&dt(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,ft(e,!0,-1)):e.position<e.length-1&&ot(e,"end of the stream or a document separator is expected")}function Ot(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new it(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,ot(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)St(n);return n.documents}function jt(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=Ot(e,n);if("function"!=typeof t)return i;for(var r=0,o=i.length;r<o;r+=1)t(i[r])}function Tt(e,t){var n=Ot(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new g("expected a single document in the stream, but found more")}}var Et=jt,Mt=Tt,Ft={loadAll:Et,load:Mt},Lt=Object.prototype.toString,Nt=Object.prototype.hasOwnProperty,_t=65279,Dt=9,Ut=10,Yt=13,qt=32,Rt=33,Ht=34,Bt=35,Kt=37,Pt=38,Wt=39,$t=42,Gt=44,Vt=45,Zt=58,Jt=61,Qt=62,zt=63,Xt=64,en=91,tn=93,nn=96,rn=123,on=124,an=125,ln={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},sn=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],cn=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function un(e,t){var n,i,r,o,a,l,s;if(null===t)return{};for(n={},r=0,o=(i=Object.keys(t)).length;r<o;r+=1)a=i[r],l=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(s=e.compiledTypeMap.fallback[a])&&Nt.call(s.styleAliases,l)&&(l=s.styleAliases[l]),n[a]=l;return n}function pn(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else{if(!(e<=4294967295))throw new g("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+f.repeat("0",i-t.length)+t}var fn=1,dn=2;function hn(e){this.schema=e.schema||Ee,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=f.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=un(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?dn:fn,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function gn(e,t){for(var n,i=f.repeat(" ",t),r=0,o=-1,a="",l=e.length;r<l;)-1===(o=e.indexOf("\n",r))?(n=e.slice(r),r=l):(n=e.slice(r,o+1),r=o+1),n.length&&"\n"!==n&&(a+=i),a+=n;return a}function mn(e,t){return"\n"+f.repeat(" ",e.indent*t)}function yn(e,t){var n,i;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}function An(e){return e===qt||e===Dt}function vn(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==_t||65536<=e&&e<=1114111}function bn(e){return vn(e)&&e!==_t&&e!==Yt&&e!==Ut}function xn(e,t,n){var i=bn(e),r=i&&!An(e);return(n?i:i&&e!==Gt&&e!==en&&e!==tn&&e!==rn&&e!==an)&&e!==Bt&&!(t===Zt&&!r)||bn(t)&&!An(t)&&e===Bt||t===Zt&&r}function wn(e){return vn(e)&&e!==_t&&!An(e)&&e!==Vt&&e!==zt&&e!==Zt&&e!==Gt&&e!==en&&e!==tn&&e!==rn&&e!==an&&e!==Bt&&e!==Pt&&e!==$t&&e!==Rt&&e!==on&&e!==Jt&&e!==Qt&&e!==Wt&&e!==Ht&&e!==Kt&&e!==Xt&&e!==nn}function Cn(e){return!An(e)&&e!==Zt}function kn(e,t){var n,i=e.charCodeAt(t);return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}function In(e){return/^\n* /.test(e)}var Sn=1,On=2,jn=3,Tn=4,En=5;function Mn(e,t,n,i,r,o,a,l){var s,c=0,u=null,p=!1,f=!1,d=-1!==i,h=-1,g=wn(kn(e,0))&&Cn(kn(e,e.length-1));if(t||a)for(s=0;s<e.length;c>=65536?s+=2:s++){if(!vn(c=kn(e,s)))return En;g=g&&xn(c,u,l),u=c}else{for(s=0;s<e.length;c>=65536?s+=2:s++){if((c=kn(e,s))===Ut)p=!0,d&&(f=f||s-h-1>i&&" "!==e[h+1],h=s);else if(!vn(c))return En;g=g&&xn(c,u,l),u=c}f=f||d&&s-h-1>i&&" "!==e[h+1]}return p||f?n>9&&In(e)?En:a?o===dn?En:On:f?Tn:jn:!g||a||r(e)?o===dn?En:On:Sn}function Fn(e,t,n,i,r){e.dump=function(){if(0===t.length)return e.quotingType===dn?'""':"''";if(!e.noCompatMode&&(-1!==sn.indexOf(t)||cn.test(t)))return e.quotingType===dn?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=i||e.flowLevel>-1&&n>=e.flowLevel;switch(Mn(t,l,e.indent,a,function(t){return yn(e,t)},e.quotingType,e.forceQuotes&&!i,r)){case Sn:return t;case On:return"'"+t.replace(/'/g,"''")+"'";case jn:return"|"+Ln(t,e.indent)+Nn(gn(t,o));case Tn:return">"+Ln(t,e.indent)+Nn(gn(_n(t,a),o));case En:return'"'+Un(t)+'"';default:throw new g("impossible error: invalid scalar style")}}()}function Ln(e,t){var n=In(e)?String(t):"",i="\n"===e[e.length-1];return n+(i&&("\n"===e[e.length-2]||"\n"===e)?"+":i?"":"-")+"\n"}function Nn(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function _n(e,t){for(var n,i,r,o=/(\n+)([^\n]*)/g,a=(n=-1!==(n=e.indexOf("\n"))?n:e.length,o.lastIndex=n,Dn(e.slice(0,n),t)),l="\n"===e[0]||" "===e[0];r=o.exec(e);){var s=r[1],c=r[2];i=" "===c[0],a+=s+(l||i||""===c?"":"\n")+Dn(c,t),l=i}return a}function Dn(e,t){if(""===e||" "===e[0])return e;for(var n,i,r=/ [^ ]/g,o=0,a=0,l=0,s="";n=r.exec(e);)(l=n.index)-o>t&&(i=a>o?a:l,s+="\n"+e.slice(o,i),o=i+1),a=l;return s+="\n",e.length-o>t&&a>o?s+=e.slice(o,a)+"\n"+e.slice(a+1):s+=e.slice(o),s.slice(1)}function Un(e){for(var t,n="",i=0,r=0;r<e.length;i>=65536?r+=2:r++)i=kn(e,r),!(t=ln[i])&&vn(i)?(n+=e[r],i>=65536&&(n+=e[r+1])):n+=t||pn(i);return n}function Yn(e,t,n){var i,r,o,a="",l=e.tag;for(i=0,r=n.length;i<r;i+=1)o=n[i],e.replacer&&(o=e.replacer.call(n,String(i),o)),(Kn(e,t,o,!1,!1)||void 0===o&&Kn(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=l,e.dump="["+a+"]"}function qn(e,t,n,i){var r,o,a,l="",s=e.tag;for(r=0,o=n.length;r<o;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(Kn(e,t+1,a,!0,!0,!1,!0)||void 0===a&&Kn(e,t+1,null,!0,!0,!1,!0))&&(i&&""===l||(l+=mn(e,t)),e.dump&&Ut===e.dump.charCodeAt(0)?l+="-":l+="- ",l+=e.dump);e.tag=s,e.dump=l||"[]"}function Rn(e,t,n){var i,r,o,a,l,s="",c=e.tag,u=Object.keys(n);for(i=0,r=u.length;i<r;i+=1)l="",""!==s&&(l+=", "),e.condenseFlow&&(l+='"'),a=n[o=u[i]],e.replacer&&(a=e.replacer.call(n,o,a)),Kn(e,t,o,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Kn(e,t,a,!1,!1)&&(s+=l+=e.dump));e.tag=c,e.dump="{"+s+"}"}function Hn(e,t,n,i){var r,o,a,l,s,c,u="",p=e.tag,f=Object.keys(n);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new g("sortKeys must be a boolean or a function");for(r=0,o=f.length;r<o;r+=1)c="",i&&""===u||(c+=mn(e,t)),l=n[a=f[r]],e.replacer&&(l=e.replacer.call(n,a,l)),Kn(e,t+1,a,!0,!0,!0)&&((s=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&Ut===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,s&&(c+=mn(e,t)),Kn(e,t+1,l,!0,s)&&(e.dump&&Ut===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=p,e.dump=u||"{}"}function Bn(e,t,n){var i,r,o,a,l,s;for(o=0,a=(r=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((l=r[o]).instanceOf||l.predicate)&&(!l.instanceOf||"object"==typeof t&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(n?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(s=e.styleMap[l.tag]||l.defaultStyle,"[object Function]"===Lt.call(l.represent))i=l.represent(t,s);else{if(!Nt.call(l.represent,s))throw new g("!<"+l.tag+'> tag resolver accepts not "'+s+'" style');i=l.represent[s](t,s)}e.dump=i}return!0}return!1}function Kn(e,t,n,i,r,o,a){e.tag=null,e.dump=n,Bn(e,n,!1)||Bn(e,n,!0);var l,s=Lt.call(e.dump),c=i;i&&(i=e.flowLevel<0||e.flowLevel>t);var u,p,f="[object Object]"===s||"[object Array]"===s;if(f&&(p=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(r=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(f&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===s)i&&0!==Object.keys(e.dump).length?(Hn(e,t,e.dump,r),p&&(e.dump="&ref_"+u+e.dump)):(Rn(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===s)i&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?qn(e,t-1,e.dump,r):qn(e,t,e.dump,r),p&&(e.dump="&ref_"+u+e.dump)):(Yn(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==s){if("[object Undefined]"===s)return!1;if(e.skipInvalid)return!1;throw new g("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&Fn(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(l=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),l="!"===e.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",e.dump=l+" "+e.dump)}return!0}function Pn(e,t){var n,i,r=[],o=[];for(Wn(e,r,o),n=0,i=o.length;n<i;n+=1)t.duplicates.push(r[o[n]]);t.usedDuplicates=new Array(i)}function Wn(e,t,n){var i,r,o;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,o=e.length;r<o;r+=1)Wn(e[r],t,n);else for(r=0,o=(i=Object.keys(e)).length;r<o;r+=1)Wn(e[i[r]],t,n)}function $n(e,t){var n=new hn(t=t||{});n.noRefs||Pn(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),Kn(n,0,i,!0,!0)?n.dump+"\n":""}var Gn=$n,Vn={dump:Gn};function Zn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Jn=k;exports.Type=Jn;var Qn=j;exports.Schema=Qn;var zn=F;exports.FAILSAFE_SCHEMA=zn;var Xn=te;exports.JSON_SCHEMA=Xn;var ei=ne;exports.CORE_SCHEMA=ei;var ti=Ee;exports.DEFAULT_SCHEMA=ti;var ni=Ft.load;exports.load=ni;var ii=Ft.loadAll;exports.loadAll=ii;var ri=Vn.dump;exports.dump=ri;var oi=g;exports.YAMLException=oi;var ai=Zn("safeLoad","load");exports.safeLoad=ai;var li=Zn("safeLoadAll","loadAll");exports.safeLoadAll=li;var si=Zn("safeDump","dump");exports.safeDump=si;var ci={Type:Jn,Schema:Qn,FAILSAFE_SCHEMA:zn,JSON_SCHEMA:Xn,CORE_SCHEMA:ei,DEFAULT_SCHEMA:ti,load:ni,loadAll:ii,dump:ri,YAMLException:oi,safeLoad:ai,safeLoadAll:li,safeDump:si},ui=ci;exports.default=ui;
},{}],"N6d1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;var e=r(require("js-yaml"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}var a=function(e,t,r,a){return new(r||(r=Promise))(function(n,i){function o(e){try{c(a.next(e))}catch(t){i(t)}}function s(e){try{c(a.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,s)}c((a=a.apply(e,t||[])).next())})};class n{static hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}static removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}static addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}static setClass(e,t){e.setAttribute("class",t)}static getStyles(e){const t={};let r;for(let a=0;a<e.style.length;a++)t[r=e.style.item(a)]=e.style.getPropertyValue(r);return t}static setStyle(e,t){const r=(null!=t?t:[]).split(";").map(e=>e.trim()).filter(e=>e.length);for(let a=0;a<r.length;a++){const t=r[a].split(":").map(e=>e.trim());e.style.setProperty(t[0],t[1])}}static setText(e,t){const r=e.querySelector("tspan");if(r)r.textContent=t;else{let r=e.querySelector("title");r||(r=document.createElementNS("http://www.w3.org/2000/svg","title"),e.appendChild(r)),r.textContent=t}}static waitForChildNodes(e,t,r){return new Promise((a,n)=>{const i=setTimeout(()=>n("Timeout waiting for child element(s) to load"),r);new MutationObserver(e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)return clearTimeout(i),a()}).observe(e,{childList:!0,subtree:!0}),t()})}static formatDate(e){return e?"string"==typeof e?new Date(e).toLocaleString():e.toLocaleString():""}static parseYaml(t){return e.load(t)}static fetchText(e,t,r,i=!1){return a(this,void 0,void 0,function*(){r&&(e=e.replace(/^\/local\/floorplan\/examples\//g,`${r}/`)),e=i?e:n.cacheBuster(e);const a=new Request(e,{cache:i?"reload":"no-store",mode:t?"no-cors":void 0});try{const r=yield fetch(a);if(r.ok||t&&"opaque"===r.type){return yield r.text()}throw new Error("Error fetching resource")}catch(o){throw new URIError(`${e}: ${o.message}`)}})}static fetchImage(e,t,r,i=!1){return a(this,void 0,void 0,function*(){t&&(e=e.replace(/^\/local\/floorplan\/examples\//g,`${r}/`)),e=i?e:n.cacheBuster(e);const a=new Request(e,{cache:i?"reload":"no-store",headers:new Headers({"Content-Type":"text/plain; charset=x-user-defined"}),mode:t?"no-cors":void 0});try{const r=yield fetch(a);if(r.ok||t&&"opaque"===r.type){const e=yield r.arrayBuffer();return`data:image/jpeg;base64,${n.arrayBufferToBase64(e)}`}throw new Error("Error fetching resource")}catch(o){throw new URIError(`${e}: ${o.message}`)}})}static singleToArray(e){return null==e?[]:Array.isArray(e)?e:[e]}static getArray(e){if(null==e)return[];if(Array.isArray(e))return e;{const t=e;return Object.values(t)}}static getSet(e){if(Array.isArray(e))return new Set(e);{const t=e;return new Set(Object.values(t))}}static arrayBufferToBase64(e){let t="";[].slice.call(new Uint8Array(e)).forEach(e=>t+=String.fromCharCode(e));let r=window.btoa(t);for(;r.length%4>0;)r+="=";return r}static cacheBuster(e){return`${e}${e.indexOf("?")>=0?"&":"?"}_=${(new Date).getTime()}`}static equal(e,t){if(e===t)return!0;const r=Array.isArray(e),a=Array.isArray(t);let i=0;if(r&&a){if(e.length!=t.length)return!1;for(i=0;i<e.length;i++)if(!n.equal(e[i],t[i]))return!1;return!0}if(r!=a)return!1;if(e&&t&&"object"==typeof e&&"object"==typeof t){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;const a=e instanceof Date,o=t instanceof Date;if(a&&o)return e.getTime()==t.getTime();if(a!=o)return!1;const s=e instanceof RegExp,c=t instanceof RegExp;if(s&&c)return e.toString()==t.toString();if(s!=c)return!1;for(i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=0;i<r.length;i++)if(!n.equal(e[r[i]],t[r[i]]))return!1;return!0}return!1}static get isMobile(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))}}exports.Utils=n;
},{"js-yaml":"eIWs"}],"RkYu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logger=void 0;var e=require("../../../lib/utils");class o{constructor(e,o,r){this.element=e,this.logLevel=o,this.consoleLogLevel=r,this.logLevelGroups={error:["error"],warn:["error","warning","warn"],warning:["error","warning","warn"],info:["error","warning","warn","info"],debug:["error","warning","warn","info","debug"]}}log(o,r,t=!1){var s;const n=`${e.Utils.formatDate(new Date)} ${o.toUpperCase()} ${r}`,l=this.logLevel&&this.logLevelGroups[this.logLevel.toLowerCase()],i=(null==l?void 0:l.length)&&l.indexOf(o.toLowerCase())>=0;if((t||i)&&this.element){const r=document.createElement("li");e.Utils.addClass(r,o),r.textContent=n,null===(s=this.element.querySelector("ul"))||void 0===s||s.prepend(r),this.element.style.display="block"}this.consoleLog(o,r,t)}consoleLog(o,r,t=!1){const s=`${e.Utils.formatDate(new Date)} ${o.toUpperCase()} ${r}`,n=this.consoleLogLevel&&this.logLevelGroups[this.consoleLogLevel.toLowerCase()],l=(null==n?void 0:n.length)&&n.indexOf(o.toLowerCase())>=0;if(t||l)switch(o){case"error":console.error(s);break;case"warn":case"warning":console.warn(s);break;case"info":console.info(s);break;default:console.log(s)}}}exports.Logger=o;
},{"../../../lib/utils":"N6d1"}],"EHrm":[function(require,module,exports) {
module.exports={name:"ha-floorplan",version:"1.0.14",description:"Floorplan for Home Assistant",main:"index.js",scripts:{clean:"shx rm -rf dist/*",start:"npm run clean && parcel docs/_docs/floorplan/demo.html",lint:"npx eslint . --ext .js,.jsx,.ts,.tsx",build:"cross-env NODE_ENV=production npm run clean && parcel build src/index.ts --no-content-hash --no-source-maps --out-file floorplan","build:no-minify":"cross-env NODE_ENV=production npm run clean && parcel build src/index.ts --no-source-maps --no-minify --out-file floorplan","build:docs":"cross-env NODE_ENV=production parcel build src/components/floorplan-examples/floorplan-examples.ts --no-content-hash --no-source-maps --out-dir docs/_docs/floorplan --out-file floorplan-examples --public-url ./","serve:docs":"docker run -it --rm --volume=%cd%/docs:/srv/jekyll -p 4000:4000 jekyll/jekyll jekyll serve --incremental"},staticFiles:{staticPath:[{staticPath:"docs/_docs/floorplan",env:"development"}]},keywords:[],author:"",license:"ISC",devDependencies:{"@types/debounce":"^1.2.0","@types/js-yaml":"^4.0.0","@types/node":"^14.14.25","@typescript-eslint/eslint-plugin":"^4.15.0","@typescript-eslint/parser":"^4.15.0","babel-core":"^6.26.3",copyfiles:"^2.4.1","cross-env":"^7.0.3",eslint:"^7.19.0","node-forge":"^0.10.0","parcel-bundler":"^1.12.4","parcel-plugin-static-files-copy":"^2.5.1","parcel-plugin-wrapper":"^0.2.3",shx:"^0.3.3",typescript:"^4.1.4"},dependencies:{debounce:"^1.2.0","highlight.js":"^10.6.0","home-assistant-js-websocket":"^5.7.0","js-yaml":"^4.0.0","lit-element":"^2.4.0","oui-dom-events":"^0.2.2",superstruct:"^0.14.1"},browserslist:["last 1 Chrome version"]};
},{}],"sgaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceContext=exports.FloorplanElement=void 0;var t=require("../../lib/homeassistant/common/dom/fire_event"),e=require("../../lib/homeassistant/common/navigate"),i=require("./lib/floorplan-info"),o=require("./lib/long-clicks"),n=require("./lib/eval-helper"),s=require("debounce"),l=f(require("js-yaml")),a=require("../../lib/utils"),r=require("./lib/logger"),c=require("lit-element"),d=f(require("../../../package.json")),h=f(require("oui-dom-events"));function g(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return g=function(){return t},t}function f(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=g();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}var u=function(t,e,i,o){var n,s=arguments.length,l=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(l=(s<3?n(l):s>3?n(e,i,l):n(e,i))||l);return s>3&&l&&Object.defineProperty(e,i,l),l},v=function(t,e,i,o){return new(i||(i=Promise))(function(n,s){function l(t){try{r(o.next(t))}catch(e){s(e)}}function a(t){try{r(o.throw(t))}catch(e){s(e)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(l,a)}r((o=o.apply(t,e||[])).next())})};const p=h.default;console.info(`%c${d.description} (${d.name})%c\nVersion ${d.version}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: rgb(71, 170, 238)");class m extends c.LitElement{constructor(){super(),this.pageInfos={},this.entityInfos={},this.elementInfos={},this.cssRules=[],this.variables={},this.isRulesLoaded=!1,this.handleEntitiesDebounced=(0,s.debounce)(this.handleEntities.bind(this),100,!0),window.onerror=this.handleWindowError.bind(this)}render(){return c.html`
      <div id="floorplan-container">
        <div id="floorplan"></div>
        
        <div id="log" style="display: ${this.isShowLog?"block":"none"};">
          <a href="#" onclick="return false;" @click=${this.clearLog}>Clear log<a/>
          <ul></ul>
        </div>
      </div>
    `}static get styles(){return c.css`
      :host #floorplan-container {
        display: flex;
        flex-flow: column;
        flex: 1;
        min-height: 0;
      }

      :host #floorplan {
        display: flex;
        flex-flow: column;
        flex: 1;
        min-height: 0;
      }

      :host #log {
        max-height: 150px;
        overflow: auto;
        background-color: #eee;
        padding: 10px;
      }

      :host #log ul {
        list-style-type: none;
        padding-left: 0px;
        text-align: left;
      }

      :host svg, :host svg * {
        /* vector-effect: non-scaling-stroke !important; */
        pointer-events: all !important;
      }
    
      ha-circular-progress {
        margin: auto;
      }

      #log {
        min-height: 100px;
        max-height: 100px;
        overflow: auto;
        background-color: #eee;
        display: none;
        padding: 10px;
      }

      #log ul {
        list-style-type: none;
        padding-left: 0px;
        text-align: left;
      }

      .error {
        color: #FF0000;
      }

      .warning {
        color: #FF851B;
      }

      .info {
        color: #0000FF;
      }

      .debug {
        color: #000000;
      }
      `}clearLog(){this.logElement.querySelector("#log ul").innerHTML=""}updated(t){const e=Object.create(null,{updated:{get:()=>super.updated}});return v(this,void 0,void 0,function*(){e.updated.call(this,t),t.has("_config")&&(yield this._configChanged(),yield this.hassChanged()),t.has("hass")&&(yield this.hassChanged())})}_configChanged(){return v(this,void 0,void 0,function*(){this._config&&(yield this.init())})}hassChanged(){return v(this,void 0,void 0,function*(){this.hass&&this.config&&this.svg&&(this.isRulesLoaded?this.handleEntities():(this.isRulesLoaded=!0,this.initFloorplanRules(this.svg,this.config),yield this.handleEntities(!0)))})}get floorplanElement(){var t;return null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("floorplan")}get logElement(){var t;return null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("log")}init(){return v(this,void 0,void 0,function*(){try{const e=yield this.loadConfig(this._config);if(this.isShowLog=void 0!==e.log_level,this.logger=new r.Logger(this.logElement,e.log_level,e.console_log_level),this.logInfo("INIT","Floorplan initialized"),!this.validateConfig(e))return;this.config=e,this.config.pages?yield this.initMultiPage():yield this.initSinglePage()}catch(t){this.handleError(t)}})}initMultiPage(){return v(this,void 0,void 0,function*(){try{yield this.loadPages(),this.initPageDisplay(),this.initVariables(),this.initStartupActions()}catch(t){this.handleError(t)}})}initSinglePage(){return v(this,void 0,void 0,function*(){try{yield this.loadStyleSheet(this.config.stylesheet);const e=this.getBestImage(this.config);this.svg=yield yield this.loadFloorplanSvg(e),this.initPageDisplay(),this.initVariables(),this.initStartupActions()}catch(t){this.handleError(t)}})}loadConfig(t){return v(this,void 0,void 0,function*(){if("string"==typeof t){const e=yield a.Utils.fetchText(t,this.isDemo,this.examplespath);return l.load(e)}return JSON.parse(JSON.stringify(t))})}loadScript(t,e){return t?new Promise((i,o)=>{var n;const s=document.createElement("script");s.src=e?t:a.Utils.cacheBuster(t),s.onload=(()=>i()),s.onerror=(t=>{o(new URIError(`${t.target.src}`))}),null===(n=this.shadowRoot)||void 0===n||n.appendChild(s)}):Promise.resolve()}loadPages(){return v(this,void 0,void 0,function*(){for(const n of this.config.pages)yield this.loadPageConfig(n,this.config.pages.indexOf(n));const t=Object.keys(this.pageInfos).map(t=>this.pageInfos[t]);t.sort((t,e)=>t.index-e.index);const e=t.find(t=>void 0!==t.config.master_page);if(!e)throw new Error("A master page is required");e.isMaster=!0;const i=t.find(t=>void 0===t.config.master_page);i&&(i.isDefault=!0),yield this.loadPageFloorplanSvg(e,e);const o=t.filter(t=>t!==e);for(const n of o)yield this.loadPageFloorplanSvg(n,e)})}loadPageConfig(t,e){return v(this,void 0,void 0,function*(){const i=yield this.loadConfig(t),o=this.createPageInfo(i);return o.index=e,o})}loadPageFloorplanSvg(t,e){return v(this,void 0,void 0,function*(){const i=this.getBestImage(t.config),o=yield this.loadFloorplanSvg(i,t,e);o.id=t.config.page_id,t.svg=o,yield this.loadStyleSheet(t.config.stylesheet),this.initFloorplanRules(t.svg,t.config)})}getBestImage(t){var e;let i="";if("string"==typeof t.image)i=a.Utils.isMobile&&"string"==typeof t.image_mobile?t.image_mobile:t.image;else if(null===(e=t.image)||void 0===e?void 0:e.sizes){t.image.sizes.sort((t,e)=>e.min_width-t.min_width);for(const e of t.image.sizes)if(screen.width>=e.min_width){i=e.location;break}}return i}createPageInfo(t){const e={config:t};return e.config.rules&&this.config.rules&&(e.config.rules=e.config.rules.concat(this.config.rules)),this.pageInfos[e.config.page_id]=e,e}loadStyleSheet(t){return v(this,void 0,void 0,function*(){if(!t)return;const e=yield a.Utils.fetchText(t,this.isDemo,this.examplespath),i=document.createElement("style"),o=()=>{var t;i.innerHTML=e,null===(t=this.shadowRoot)||void 0===t||t.appendChild(i)};try{yield a.Utils.waitForChildNodes(i,o,1e4)}catch(s){console.error(s),this.logError("STYLESHEET","Error loading stylesheet")}const n=this.getCssRules(i);this.cssRules=this.cssRules.concat(n)})}getCssRules(t){var e,i,o,n,s,l;let r;if(t.sheet)r=null!==(i=null===(e=t.sheet)||void 0===e?void 0:e.cssRules)&&void 0!==i?i:null===(o=t.sheet)||void 0===o?void 0:o.rules;else{const e=t;e.styleSheet&&(r=null!==(s=null===(n=e.styleSheet)||void 0===n?void 0:n.cssRules)&&void 0!==s?s:null===(l=e.styleSheet)||void 0===l?void 0:l.rules)}return r?a.Utils.getArray(r):[]}loadFloorplanSvg(t,e,i){var o;return v(this,void 0,void 0,function*(){const n=yield a.Utils.fetchText(t,this.isDemo,this.examplespath),s=document.createElement("div");s.innerHTML=n;const l=s.querySelector("svg");if(e&&l.setAttribute("id",e.config.page_id),l.setAttribute("height","100%"),l.setAttribute("width","100%"),l.style.height="100%",l.style.width="100%",l.style.margin="auto",l.style.cursor="default",l.style.opacity="0",l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e&&i){const t=i.config.page_id,n=i.config.master_page.content_element;if(e.config.page_id===t)this.floorplanElement.appendChild(l);else{const t=this.floorplanElement.querySelector("#"+n),e=Number.parseFloat(l.getAttribute("height")),i=Number.parseFloat(l.getAttribute("width"));l.getAttribute("viewBox")||l.setAttribute("viewBox",`0 0 ${i} ${e}`),l.setAttribute("preserveAspectRatio","xMinYMin meet"),l.setAttribute("height",t.getAttribute("height")),l.setAttribute("width",t.getAttribute("width")),l.setAttribute("x",t.getAttribute("x")),l.setAttribute("y",t.getAttribute("y")),null===(o=t.parentElement)||void 0===o||o.appendChild(l)}}else this.floorplanElement.appendChild(l);return l})}loadImage(t,e,i,o){return v(this,void 0,void 0,function*(){return t.toLowerCase().indexOf(".svg")>=0?yield this.loadSvgImage(t,e,i,o):yield this.loadBitmapImage(t,e,i,o)})}loadBitmapImage(t,e,i,o){return v(this,void 0,void 0,function*(){const n=yield a.Utils.fetchImage(t,this.isDemo,this.examplespath);this.logDebug("IMAGE",`${i} (setting image: ${t})`);let s=e.svgElement;return"image"!==s.nodeName&&(s=this.createImageElement(e.originalSvgElement),e.svgElement=this.replaceElement(e.svgElement,s),this.attachClickHandlers(s,e,i,void 0,o),this.handleEntityIdSetHoverOver(i)),s.getAttributeNS("http://www.w3.org/1999/xlink","xlink:href")!==n&&(s.removeAttributeNS("http://www.w3.org/1999/xlink","xlink:href"),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t)),s})}loadSvgImage(t,e,i,o){return v(this,void 0,void 0,function*(){const n=yield a.Utils.fetchText(t,this.isDemo,this.examplespath);this.logDebug("IMAGE",`${i} (setting image: ${t})`);const s=document.createElement("div");s.innerHTML=n;const l=s.querySelector("svg"),r=Number.parseFloat(l.getAttribute("height")),c=Number.parseFloat(l.getAttribute("width"));return l.getAttribute("viewBox")||l.setAttribute("viewBox",`0 0 ${c} ${r}`),l.id=e.svgElement.id,l.setAttribute("preserveAspectRatio","xMinYMin meet"),l.setAttribute("height",e.originalBBox.height.toString()),l.setAttribute("width",e.originalBBox.width.toString()),l.setAttribute("x",e.originalBBox.x.toString()),l.setAttribute("y",e.originalBBox.y.toString()),e.svgElement=this.replaceElement(e.svgElement,l),this.attachClickHandlers(l,e,i,void 0,o),this.handleEntityIdSetHoverOver(i),l})}_querySelectorAll(t,e,i){let o=e?Array.from(t.querySelectorAll(e).values()):[];return o=i?[t].concat(o):o}replaceElement(t,e){const i=t.parentElement;return this._querySelectorAll(t,"*",!0).forEach(t=>{p.off(t,"click"),p.off(t,"longClick"),t.remove()}),t.remove(),null==i||i.appendChild(e),e}initPageDisplay(){if(this.config.pages)for(const t of Object.values(this.pageInfos))t.svg.style.opacity="1",t.svg.style.display=t.isMaster||t.isDefault?"initial":"none";else this.svg.style.opacity="1",this.svg.style.display="block"}initVariables(){if(this.config.variables)for(const t of this.config.variables)this.initVariable(t);if(this.config.pages)for(const t of Object.values(this.pageInfos))if(t.config.variables)for(const e of t.config.variables)this.initVariable(e)}initVariable(t){let e,i;if("string"==typeof t?e=t:(e=t.name,i=t.value,t.value&&(i=this.evaluate(t.value,e,void 0))),!this.entityInfos[e]){const t={entityId:e,ruleInfos:[],lastState:void 0};this.entityInfos[e]=t}this.hass.states[e]||(this.hass.states[e]={entity_id:e,state:i,last_changed:(new Date).toString(),last_updated:(new Date).toString(),attributes:{},context:{}}),this.setVariable(e,i,{},!0)}getActionConfigs(t){var e,i;if(null==t)return[];if(Array.isArray(t)){for(const i of t)i.action=null!==(e=i.action)&&void 0!==e?e:"call-service";return t}return"object"==typeof t?(t.action=null!==(i=t.action)&&void 0!==i?i:"call-service",[t]):"string"==typeof t?t.indexOf(".")>=0?[{action:"call-service",service:t}]:[{action:t}]:[]}initStartupActions(){if(this.handleActions(this.config.startup_action,void 0,void 0,void 0),this.config.pages)for(const t of Object.values(this.pageInfos))this.handleActions(t.config.startup_action,void 0,void 0,void 0)}initFloorplanRules(t,e){if(!e.rules)return;const i=this._querySelectorAll(t,"*",!0);this.initRules(e,t,i)}initRules(t,e,i){if(t.defaults){const e=t.defaults;for(const i of t.rules)i.hover_action=void 0===i.hover_action?e.hover_action:i.hover_action,i.tap_action=void 0===i.tap_action?e.tap_action:i.tap_action,i.hold_action=void 0===i.hold_action?e.hold_action:i.hold_action}for(const o of t.rules)o.entity||o.entities?this.initEntityRule(o,e,i):(o.element||o.elements)&&this.initElementRule(o,e,i)}initEntityRule(t,e,o){const n=this.initGetEntityRuleEntities(t);for(const s of n){const n=s.entityId;let l=this.entityInfos[n];l||(l={entityId:n,ruleInfos:[],lastState:void 0},this.entityInfos[n]=l);const a=new i.FloorplanRuleInfo(t);l.ruleInfos.push(a);for(const t of s.elementIds){const i=o.find(e=>e.id===t);if(!i){this.logWarning("CONFIG",`Cannot find element '${t}' in SVG file`);continue}const s=this.addSvgElementToRule(e,i,a);s.svgElement=i,i.appendChild(document.createElementNS("http://www.w3.org/2000/svg","title")),this.attachClickHandlers(i,s,n,void 0,a)}}}initGetEntityRuleEntities(t){const e=[];t.groups=t.groups?t.groups:[];for(const n of t.groups){const t=this.hass.states[n];if(t)for(const i of t.attributes.entity_id)this.addTargetEntity(i,[i],e);else this.logWarning("CONFIG",`Cannot find '${n}' in Home Assistant groups`)}t.entities=t.entities?t.entities:[],t.entities=t.entity?t.entities.concat(t.entity):t.entities;const i=t.entities.filter(t=>"string"==typeof t);for(const n of i){const i=t.elements?t.elements:t.element?[t.element]:[n];this.addTargetEntity(n,i,e)}const o=t.entities.filter(t=>"string"!=typeof t);for(const n of o){const t=n;this.addTargetEntity(t.entity,[t.element],e)}return e}addTargetEntity(t,e,i){const o=this.hass.states[t],n="floorplan"===t.split(".")[0];o||n?i.push({entityId:t,elementIds:e}):this.logWarning("CONFIG",`Cannot find '${t}' in Home Assistant entities`)}initElementRule(t,e,o){if(t.element||t.elements){t.elements=t.elements?t.elements:[],t.elements=t.element?t.elements.concat(t.element):t.elements;for(const n of t.elements){const s=o.find(t=>t.id===n);if(s){let o=this.elementInfos[n];o||(o={ruleInfos:[],lastState:void 0},this.elementInfos[n]=o);const l=new i.FloorplanRuleInfo(t);o.ruleInfos.push(l);const a=this.addSvgElementToRule(e,s,l);this.attachClickHandlers(s,a,void 0,n,l)}else this.logWarning("CONFIG",`Cannot find '${n}' in SVG file`)}}}attachClickHandlers(t,e,n,s,l){this._querySelectorAll(t,void 0,!0).forEach(r=>{const c=r,d=r===t;if(c.appendChild(document.createElementNS("http://www.w3.org/2000/svg","title")),l.rule.tap_action){const t=this.getActionConfigs(l.rule.tap_action),o=new i.FloorplanClickContext(this,n,s,e,l,t);p.on(c,"click",this.onClick.bind(o)),c.style&&(c.style.cursor="pointer"),a.Utils.addClass(c,`floorplan-click${d?"":"-child"}`)}if(l.rule.hold_action){const t=this.getActionConfigs(l.rule.hold_action),r=new i.FloorplanClickContext(this,n,s,e,l,t);o.LongClicks.observe(c),p.on(c,"longClick",this.onLongClick.bind(r)),c.style&&(c.style.cursor="pointer"),a.Utils.addClass(c,`floorplan-long-click${d?"":"-child"}`)}})}addSvgElementToRule(t,e,o){const n=new i.FloorplanSvgElementInfo(e.id,e,e,a.Utils.getSet(e.classList),a.Utils.getStyles(e),e.getBBox(),e.getBoundingClientRect());return o.svgElementInfos[e.id]=n,n}createImageElement(t){const e=document.createElementNS("http://www.w3.org/2000/svg","image");return e.setAttribute("id",t.getAttribute("id")),e.setAttribute("x",t.getAttribute("x")),e.setAttribute("y",t.getAttribute("y")),e.setAttribute("height",t.getAttribute("height")),e.setAttribute("width",t.getAttribute("width")),e}handleEntities(t=!1){return v(this,void 0,void 0,function*(){this.handleElements();const e=this.getChangedEntities(t);for(const t of Object.keys(this.variables))e.add(t);if(e.size)for(const t of e)yield this.handleEntity(t)})}getChangedEntities(t){const e=new Set,i=Object.keys(this.hass.states);for(const o of i){const i=this.entityInfos[o];if(i){const n=this.hass.states[o];if(t)this.logDebug("STATE",`${o}: ${n.state} (initial load)`),e.has(o)||e.add(o);else if(i.lastState){const t=n.state;n.last_changed!==i.lastState.last_changed?(this.logDebug("STATE",`${o}: ${t} (last changed ${a.Utils.formatDate(i.lastState.last_changed)})`),e.has(o)||e.add(o)):a.Utils.equal(i.lastState.attributes,n.attributes)||(this.logDebug("STATE",`${o}: attributes (last updated ${a.Utils.formatDate(i.lastState.last_changed)})`),e.has(o)||e.add(o))}}}return e}handleEntity(t){return v(this,void 0,void 0,function*(){const e=this.hass.states[t],i=this.entityInfos[t];if(i){i.lastState=Object.assign({},e);for(const t of i.ruleInfos)for(const e of Object.values(t.svgElementInfos))e.svgElement&&this.handleActions(t.rule.state_action,i.entityId,e,t);this.handleEntitySetHoverOver(i)}})}handleElements(){return v(this,void 0,void 0,function*(){for(const t of Object.values(this.elementInfos))for(const e of t.ruleInfos)for(const t of Object.values(e.svgElementInfos))this.handleActions(e.rule.state_action,void 0,t,e)})}handleEntityIdSetHoverOver(t){const e=this.entityInfos[t];e&&this.handleEntitySetHoverOver(e)}handleEntitySetHoverOver(t){const e=t.entityId,i=this.hass.states[e];for(const o of t.ruleInfos)if(o.rule.hover_action){let t="string"==typeof o.rule.hover_action&&"hover-info"===o.rule.hover_action;if(t=(t=t||"object"==typeof o.rule.hover_action&&"hover-info"===o.rule.hover_action.action)||Array.isArray(o.rule.hover_action)&&o.rule.hover_action.some(t=>"hover-info"===t.action))for(const e of Object.values(o.svgElementInfos))a.Utils.addClass(e.svgElement,"floorplan-hover"),e.svgElement.style.cursor="pointer",e.svgElement.querySelectorAll("title").forEach(t=>{const e=a.Utils.formatDate(i.last_changed),o=a.Utils.formatDate(i.last_updated);let n=`${i.attributes.friendly_name}\n`;n+=`State: ${i.state}\n\n`,Object.keys(i.attributes).map(t=>{n+=`${t}: ${i.attributes[t]}\n`}),n+="\n",n+=`Last changed: ${e}\n`,n+=`Last updated: ${o}`,t.textContent=n})}}isOptionEnabled(t){return null===t||void 0!==t}validateConfig(t){let e=!0;if(t.pages||t.rules)if(t.pages)t.pages.length||this.logWarning("CONFIG","The 'pages' section must contain one or more pages in floorplan configuration");else{t.rules||this.logWarning("CONFIG","Cannot find 'rules' in floorplan configuration");let i=t.rules.filter(t=>t.entities&&t.elements);i.length&&(this.logError("CONFIG","A rule cannot contain both 'entities' and 'elements' in floorplan configuration"),e=!1),(i=t.rules.filter(t=>!(t.entity||t.entities||t.element||t.elements))).length&&(this.logError("CONFIG","A rule must contain either 'entities' or 'elements' in floorplan configuration"),e=!1)}else this.logWarning("CONFIG","Cannot find 'pages' nor 'rules' in floorplan configuration");return e}isTemplate(t){return!!t.trim().startsWith(">")||t.indexOf("${")>=0&&t.indexOf("}")>=0}evaluate(t,e,i){if("string"!=typeof t||!this.isTemplate(t))return t;try{return n.EvalHelper.evaluate(t,this.hass,this.config,e,i)}catch(o){return this.handleError(o,{expression:t,entityId:e,hass:this.hass,svgElement:i})}}onClick(t){t.stopPropagation(),t.preventDefault();this.instance.handleActions(this.actions,this.entityId,this.svgElementInfo,this.ruleInfo)}onLongClick(t){t.stopPropagation(),t.preventDefault();const e=this,i=e.instance;setTimeout(()=>{i.handleActions(e.actions,e.entityId,e.svgElementInfo,e.ruleInfo)},300)}handleActions(i,o,n,s){const l=this.getActionConfigs(i);for(const a of l){if(a.confirmation&&(!a.confirmation.exemptions||!a.confirmation.exemptions.some(t=>t.user===this.hass.user.id))&&!confirm(a.confirmation.text||`Are you sure you want to ${a.action}?`))return;switch(a.action){case"more-info":this.isDemo?this.notify(`Performing action: ${a.action} ${o}`):(0,t.fireEvent)(this,"hass-more-info",{entityId:o});break;case"navigate":this.isDemo?this.notify(`Performing action: ${a.action} ${a.navigation_path}`):(0,e.navigate)(this,a.navigation_path);break;case"url":this.isDemo?this.notify(`Performing action: ${a.action} ${a.url_path}`):(0,e.navigate)(this,a.url_path);break;case"toggle":if(o){const t={action:"call-service",service:"homeassistant.toggle",service_data:{entity_id:o}};this.callService(t,o,n,s)}break;case"call-service":if(!a.service)return;this.callService(a,o,n,s);break;case"fire-dom-event":(0,t.fireEvent)(this,"ll-custom",a)}}}callService(t,e,i,o){const n=this.evaluate(t.service,e,null==i?void 0:i.svgElement);let s={};if("object"==typeof t.service_data)for(const c of Object.keys(t.service_data))s[c]=this.evaluate(t.service_data[c],e,null==i?void 0:i.svgElement);else if("string"==typeof t.service_data){const o=this.evaluate(t.service_data,e,null==i?void 0:i.svgElement);s="string"==typeof o&&o.trim().startsWith("{")?JSON.parse(o):o}else void 0!==t.service_data&&(s=t.service_data);const[l,a]=n.split(".",2);"floorplan"!==l&&"object"==typeof s&&(null===s.entity_id||Array.isArray(s.entity_id)&&!s.entity_id.length||!s.entity_id&&e&&(s.entity_id=e));const r={domain:l,service:a,data:s,entityId:e,svgElementInfo:i,ruleInfo:o};switch(r.domain){case"floorplan":this.callFloorplanService(r);break;default:this.callHomeAssistantService(r)}return r}callFloorplanService(t){var e,i,o,n,s,l,r,c,d,h,g,f,u;const v=t.entityId,p=t.svgElementInfo,m=null!==(e=null==p?void 0:p.svgElement)&&void 0!==e?e:void 0,y=t.ruleInfo;let b,E,S,_,I,w,A,x,C=[],k=[];switch(t.service){case"class_set":if(S="string"==typeof t.data?t.data:t.data.class,(I=new Set(p.originalClasses)).add(S),Array.isArray(null===(i=t.data)||void 0===i?void 0:i.elements)&&(C=C.concat(null===(o=t.data)||void 0===o?void 0:o.elements)),"string"==typeof(null===(n=t.data)||void 0===n?void 0:n.element)&&(C=C.concat([null===(s=t.data)||void 0===s?void 0:s.element])),C.length)for(const t of C)k=this._querySelectorAll(this.svg,`#${t.replace(/\./g,"\\.")}`,!1);else k=[m];for(const t of k)a.Utils.setClass(t,S);break;case"style_set":if(_="string"==typeof t.data?t.data:t.data.style,Array.isArray(null===(l=t.data)||void 0===l?void 0:l.elements)&&(C=C.concat(null===(r=t.data)||void 0===r?void 0:r.elements)),"string"==typeof(null===(c=t.data)||void 0===c?void 0:c.element)&&(C=C.concat([null===(d=t.data)||void 0===d?void 0:d.element])),C.length)for(const t of C)k=this._querySelectorAll(this.svg,`#${t.replace(/\./g,"\\.")}`,!1);else k=[p.svgElement];for(const t of k)a.Utils.setStyle(t,_);break;case"text_set":if(x="string"==typeof t.data?t.data:t.data.text,Array.isArray(null===(h=t.data)||void 0===h?void 0:h.elements)&&(C=C.concat(null===(g=t.data)||void 0===g?void 0:g.elements)),"string"==typeof(null===(f=t.data)||void 0===f?void 0:f.element)&&(C=C.concat([null===(u=t.data)||void 0===u?void 0:u.element])),C.length)for(const t of C)k=this._querySelectorAll(this.svg,`#${t.replace(/\./g,"\\.")}`,!1);else k=[p.svgElement];for(const t of k)a.Utils.setText(t,x);break;case"image_set":w="string"==typeof t.data?t.data:t.data.image,A="object"==typeof t.data?t.data.image_refresh_interval:0,y.imageLoader&&clearInterval(y.imageLoader),A&&(y.imageLoader=setInterval(this.loadImage.bind(this),1e3*A,w,p,v,y)),this.loadImage(w,p,v,y);break;case"page_navigate":(E=(b=t.data.page_id)?this.pageInfos[b]:void 0)&&(Object.keys(this.pageInfos).map(t=>{const e=this.pageInfos[t];e.isMaster||"none"===e.svg.style.display||(e.svg.style.display="none")}),E.svg.style.display="block");break;case"variable_set":if(t.data.variable){const e={};if(t.data.attributes){const i=t.data.attributes;for(const t of Object.keys(i))e[t]=this.getActionValue(i[t],v,m)}const i=t.data,o=this.getActionValue(i,v,m);this.setVariable(t.data.variable,o,e,!1)}}}getActionValue(t,e,i){let o=t.value;return t.value&&(o=this.evaluate(t.value,e,i)),o}setVariable(t,e,i,o){if(this.variables[t]=e,this.hass.states[t]){this.hass.states[t].state=e.toString();for(const e of Object.keys(i))this.hass.states[t].attributes[e]=i[e]}for(const n of Object.keys(this.variables)){const t=this.hass.states[n];t&&(t.last_changed=(new Date).toString())}o||this.handleEntities()}callHomeAssistantService(t){this.hass.callService(t.domain,t.service,t.data),this.isDemo&&this.notify(`Calling service: ${t.domain}.${t.service} (${t.data.entity_id})`)}handleWindowError(t,e,i,o,n){if(t.toLowerCase().indexOf("script error")>=0)this.logError("SCRIPT","Script error: See browser console for detail");else{const s=[t,"URL: "+e,"Line: "+i+", column: "+o,"Error: "+JSON.stringify(n)].join("<br>");this.logError("ERROR",s)}return!1}handleError(t,e){console.error(t,e);let i="Error";"string"==typeof t&&(i=t),t.stack?i=`${t.stack}`:t.message&&(i=`${t.message}`),this.logger.log("error",i)}logError(t,e){this.logger.log("error",`${t} ${e}`)}logWarning(t,e){this.logger.log("warning",`${t} ${e}`)}logInfo(t,e){this.logger.log("info",`${t} ${e}`)}logDebug(t,e){this.logger.log("debug",`${t} ${e}`)}}exports.FloorplanElement=m,u([(0,c.property)({type:String})],m.prototype,"examplespath",void 0),u([(0,c.property)({type:Object})],m.prototype,"hass",void 0),u([(0,c.property)({type:String||Object})],m.prototype,"_config",void 0),u([(0,c.property)({type:Boolean})],m.prototype,"isDemo",void 0),u([(0,c.property)({type:Boolean})],m.prototype,"isShowLog",void 0),u([(0,c.property)({type:Function})],m.prototype,"notify",void 0),customElements.get("floorplan-element")||customElements.define("floorplan-element",m);class y{}exports.ServiceContext=y;
},{"../../lib/homeassistant/common/dom/fire_event":"uXqs","../../lib/homeassistant/common/navigate":"q0Uk","./lib/floorplan-info":"YaK1","./lib/long-clicks":"SGKf","./lib/eval-helper":"ReJd","debounce":"dLxY","js-yaml":"eIWs","../../lib/utils":"N6d1","./lib/logger":"RkYu","lit-element":"bhxD","../../../package.json":"EHrm","oui-dom-events":"QJxt"}],"a9JD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanCard=void 0;var e=require("lit-element");require("../floorplan/floorplan-element");var t=function(e,t,o,i){var l,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var p=e.length-1;p>=0;p--)(l=e[p])&&(r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};class o extends e.LitElement{render(){var t,o,i,l,n;return this.config?e.html`
      <ha-card>
        ${this.isDemo?"":e.html`
          <h1 class="card-header">${null===(t=this.config)||void 0===t?void 0:t.title}</h1>
        `}

        <div class="content ${this.isPanel||(null===(o=this.config)||void 0===o?void 0:o.full_height)?(null===(l=null===(i=this.config)||void 0===i?void 0:i.title)||void 0===l?void 0:l.trim().length)?"with-title-panel-height":"without-title-panel-height":""}">
          <floorplan-element .examplespath=${this.examplespath} .hass=${this.hass} ._config=${null===(n=this.config)||void 0===n?void 0:n.config} .isDemo=${this.isDemo} .notify=${this.notify}></floorplan-element>
        </div>

      </ha-card>
    `:e.html``}static get styles(){return e.css`
      :host .content, :host .content floorplan-element {
        display: flex;
        flex-flow: column;
        flex: 1;
        min-height: 0;
      }

      :host .content.with-title-panel-height {
        height: calc(100vh - var(--header-height) - 78px);
      }

      :host .content.without-title-panel-height {
        height: calc(100vh - 86px);
      }      
    `}getCardSize(){return 1}setConfig(e){this.config=e}}exports.FloorplanCard=o,t([(0,e.property)({type:Object})],o.prototype,"hass",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"isPanel",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"editMode",void 0),t([(0,e.property)({type:Object})],o.prototype,"config",void 0),t([(0,e.property)({type:String})],o.prototype,"examplespath",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"isDemo",void 0),t([(0,e.property)({type:Function})],o.prototype,"notify",void 0),customElements.get("floorplan-card")||customElements.define("floorplan-card",o);
},{"lit-element":"bhxD","../floorplan/floorplan-element":"sgaU"}],"r9a2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanPanel=void 0;var e=require("lit-element");require("../floorplan/floorplan-element");var t=function(e,t,o,p){var r,a=arguments.length,i=a<3?t:null===p?p=Object.getOwnPropertyDescriptor(t,o):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,p);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};class o extends e.LitElement{render(){var t,o,p;return e.html`
      <ha-app-layout>

        <app-header fixed slot="header" ?hidden=${!this.showAppHeader}>
          <app-toolbar>
            <ha-menu-button .hass=${this.hass} .narrow=${this.narrow}"></ha-menu-button>
            <div main-title>${null===(t=this.panel)||void 0===t?void 0:t.title}</div>
          </app-toolbar>
        </app-header>        

        <div class="content ${this.showAppHeader?"regular-height":"full-height"}">
          <floorplan-element .examplespath=${this.examplespath} .hass=${this.hass} ._config=${null===(p=null===(o=this.panel)||void 0===o?void 0:o.config)||void 0===p?void 0:p.config} .isDemo=${this.isDemo} .notify=${this.notify}></floorplan-element>
        </div>

      </ha-app-layout>
    `}static get styles(){return e.css`
      :host .content, :host .content floorplan-element {
        display: flex;
        flex-flow: column;
        flex: 1;
        min-height: 0;
      }

      :host .content.regular-height {
        height: calc(100vh - var(--header-height) - 10px);
      }

      :host .content.full-height {
        height: calc(100vh - 10px);
      }

      [hidden] {
        display: none !important;
      }
    `}update(e){var t,o;super.update(e),e.has("panel")&&(this.showSideBar=!1!==(null===(t=this.panel)||void 0===t?void 0:t.config.show_side_bar),this.showAppHeader=!1!==(null===(o=this.panel)||void 0===o?void 0:o.config.show_app_header)&&!this.isDemo,!1===this.panel.config.show_side_bar&&(this.hass.dockedSidebar="always_hidden"))}}exports.FloorplanPanel=o,t([(0,e.property)({type:Object})],o.prototype,"hass",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"narrow",void 0),t([(0,e.property)({type:Object})],o.prototype,"panel",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"showSideBar",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"showAppHeader",void 0),t([(0,e.property)({type:String})],o.prototype,"examplespath",void 0),t([(0,e.property)({type:Boolean})],o.prototype,"isDemo",void 0),t([(0,e.property)({type:Function})],o.prototype,"notify",void 0),customElements.get("floorplan-panel")||customElements.define("floorplan-panel",o);
},{"lit-element":"bhxD","../floorplan/floorplan-element":"sgaU"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"FloorplanCard",{enumerable:!0,get:function(){return e.FloorplanCard}}),Object.defineProperty(exports,"FloorplanPanel",{enumerable:!0,get:function(){return r.FloorplanPanel}});var e=require("./components/floorplan-card/floorplan-card"),r=require("./components/floorplan-panel/floorplan-panel");
},{"./components/floorplan-card/floorplan-card":"a9JD","./components/floorplan-panel/floorplan-panel":"r9a2"}]},{},["QCba"], null)
