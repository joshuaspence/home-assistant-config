---
blueprint:
  name: 'Hue Dimmer Switch'
  domain: 'automation'
  input:
    remote:
      name: 'Remote'

      # TODO: Use `device` selector.
      selector:
        text: null

    on_press:
      name: 'On Press'
      <<: &common_config
        default: []
        selector:
          action: null
    up_press:
      name: 'Up Press'
      <<: *common_config
    down_press:
      name: 'Down Press'
      <<: *common_config
    off_press:
      name: 'Off Press'
      <<: *common_config

trigger_variables:
  device_friendly_name: !input 'remote'

trigger:
  platform: 'mqtt'
  topic: 'zigbee2mqtt/{{ device_friendly_name }}/action'

action:
  - choose:
      - conditions: '{{ trigger.payload == "on_press" }}'
        sequence: !input 'on_press'
      - conditions: '{{ trigger.payload == "up_press" }}'
        sequence: !input 'up_press'
      - conditions: '{{ trigger.payload == "down_press" }}'
        sequence: !input 'down_press'
      - conditions: '{{ trigger.payload == "off_press" }}'
        sequence: !input 'off_press'

mode: 'queued'
max_exceeded: 'silent'
trace:
  stored_traces: 10
