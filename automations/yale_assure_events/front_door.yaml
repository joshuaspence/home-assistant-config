---
id: 'b8ac47a4-7b1c-4baf-b891-15b7242a0e8c'
alias: 'Front Door ZHA Events'
use_blueprint:
  path: 'yale_assure_events.yaml'
  input:
    lock: 'a563f1bd6116e59f9265606686f334db'
    keypad_unlock:
      - variables:
          code_slots:
            - 'josh'
            - 'lily'
          friendly_name: >-
            {% if code_slot == 1 %}
              master code
            {% else %}
              {{ state_attr('person.' ~ code_slots[code_slot - 2], 'friendly_name') }}
            {% endif %}
      - service: 'logbook.log'
        data:
          message: 'was unlocked by {{ friendly_name }}'
          <<: &common_data
            name: 'Front Door'
            entity_id: 'lock.front_door'
            domain: 'lock'
    manual_lock:
      service: 'logbook.log'
      data:
        message: 'was locked manually'
        <<: *common_data
    manual_unlock:
      service: 'logbook.log'
      data:
        message: 'was unlocked manually'
        <<: *common_data
    touch_lock:
      service: 'logbook.log'
      data:
        message: 'was locked by touchscreen'
        <<: *common_data
