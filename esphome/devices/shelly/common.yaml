---
substitutions:
  device_board: 'esp01_1m'
  device_platform: 'ESP8266'
  max_power: '2000.0'
  max_temp: '80.0'

  # NOTE: See esphome/issues#1532.
  wifi_power_save_mode: 'high'

packages:
  wifi: !include '../../packages/wifi.yaml'

button:
  - platform: 'template'
    id: 'turn_off'
    internal: true
    on_press:
      - lambda: !lambda |-
          #ifdef USE_FAN
            for (auto *obj : App.get_fans()) {
              if (!obj->is_internal()) {
                obj->turn_off().perform();
              }
            }
          #endif

          #ifdef USE_LIGHT
            for (auto *obj : App.get_lights()) {
              if (!obj->is_internal()) {
                obj->turn_off().perform();
              }
            }
          #endif
