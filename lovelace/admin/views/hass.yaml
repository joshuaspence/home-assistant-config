---
title: 'Home Assistant'
icon: 'mdi:home-assistant'
path: 'hass'
cards:
  - type: 'entities'
    title: 'Home Assistant'
    icon: 'mdi:home-assistant'
    entities:
      - type: 'custom:template-entity-row'
        name: 'Areas'
        icon: 'mdi:home-search'
        state: >-
          {{ states | map(attribute='entity_id') | map('area_name') | select | unique | list | count }}
      - type: 'custom:template-entity-row'
        name: 'Automations'
        icon: 'mdi:robot'
        state: '{{ states.automation | count }}'
      - type: 'custom:template-entity-row'
        name: 'Binary Sensors'
        icon: 'mdi:checkbox-blank-circle-outline'
        state: '{{ states.binary_sensor | count }}'
      - type: 'custom:template-entity-row'
        name: 'Buttons'
        icon: 'mdi:gesture-tap-button'
        state: '{{ states.button | count }}'
      - type: 'custom:template-entity-row'
        name: 'Cameras'
        icon: 'mdi:video'
        state: '{{ states.camera | count }}'
      - type: 'custom:template-entity-row'
        name: 'HVACs'
        icon: 'mdi:thermostat'
        state: '{{ states.climate | count }}'
      - type: 'custom:template-entity-row'
        name: 'Covers'
        icon: 'mdi:window-open'
        state: '{{ states.cover | count }}'
      - type: 'custom:template-entity-row'
        name: 'Device Tracker'
        icon: 'mdi:crosshairs-gps'
        state: '{{ states.device_tracker | count }}'
      - type: 'custom:template-entity-row'
        name: 'Fans'
        icon: 'mdi:fan'
        state: '{{ states.fan | count }}'
      - type: 'custom:template-entity-row'
        name: 'Groups'
        icon: 'mdi:group'
        state: '{{ states.group | count }}'
      - type: 'custom:template-entity-row'
        name: 'Humidifiers'
        icon: 'mdi:air-humidifier'
        state: '{{ states.humidifier | count }}'
      - type: 'custom:template-entity-row'
        name: 'Lights'
        icon: 'mdi:lightbulb'
        state: '{{ states.light | count }}'
      - type: 'custom:template-entity-row'
        name: 'Locks'
        icon: 'mdi:lock'
        state: '{{ states.lock | count }}'
      - type: 'custom:template-entity-row'
        name: 'Media Players'
        icon: 'mdi:cast'
        state: '{{ states.media_player | count }}'
      - type: 'custom:template-entity-row'
        name: 'Numbers'
        icon: 'mdi:format-list-numbered'
        state: '{{ states.number | count }}'
      - type: 'custom:template-entity-row'
        name: 'Persons'
        icon: 'mdi:account'
        state: '{{ states.person | count }}'
      - type: 'custom:template-entity-row'
        name: 'Scenes'
        icon: 'mdi:palette'
        state: '{{ states.scene | count }}'
      - type: 'custom:template-entity-row'
        name: 'Scripts'
        icon: 'mdi:script-text'
        state: '{{ states.script | count }}'
      - type: 'custom:template-entity-row'
        name: 'Sensors'
        icon: 'mdi:eye'
        state: '{{ states.sensor | count }}'
      - type: 'custom:template-entity-row'
        name: 'Switches'
        icon: 'mdi:light-switch'
        state: '{{ states.switch | count }}'
      - type: 'custom:template-entity-row'
        name: 'Vacuums'
        icon: 'mdi:robot-vacuum'
        state: '{{ states.vacuum | count }}'
      - type: 'custom:template-entity-row'
        name: 'Zones'
        icon: 'mdi:home'
        state: '{{ states.zone | count }}'

  - type: 'entities'
    title: 'Sensors'
    icon: 'mdi:eye'
    entities:
      - type: 'custom:template-entity-row'
        name: 'Battery'
        icon: 'mdi:battery'
        state: '{{ states.sensor | selectattr("attributes.device_class", "eq", "battery") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Connectivity'
        icon: 'mdi:server-network'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "connectivity") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Door'
        icon: 'mdi:door'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "door") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Humidity'
        icon: 'mdi:water-percent'
        state: '{{ states.sensor | selectattr("attributes.device_class", "eq", "humidity") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Illuminance'
        icon: 'mdi:brightness-5'
        state: '{{ states.sensor | selectattr("attributes.device_class", "eq", "illuminance") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Lock'
        icon: 'mdi:lock'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "lock") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Moisture'
        icon: 'mdi:cup-water'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "moisture") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Motion'
        icon: 'mdi:motion-sensor'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "motion") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Moving'
        icon: 'mdi:cursor-move'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "moving") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Occupancy'
        icon: 'mdi:home-outline'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "occupancy") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Opening'
        icon: 'mdi:open-in-app'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "opening") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Pressure'
        icon: 'mdi:gauge'
        state: '{{ states.sensor | selectattr("attributes.device_class", "eq", "pressure") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Problem'
        icon: 'mdi:alert-circle'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "problem") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Temperature'
        icon: 'mdi:thermometer'
        state: '{{ states.sensor | selectattr("attributes.device_class", "eq", "temperature") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Vibration'
        icon: 'mdi:vibrate'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "vibration") | list | count }}'
      - type: 'custom:template-entity-row'
        name: 'Window'
        icon: 'mdi:window-open'
        state: '{{ states.binary_sensor | selectattr("attributes.device_class", "eq", "window") | list | count }}'

  - type: 'entities'
    entities:
      - entity: 'sensor.unavailable_entities'
      - type: 'attribute'
        entity: 'sensor.unavailable_entities'
        attribute: 'entities'

  - type: 'custom:auto-entities'
    card:
      type: 'entities'
      title: 'Unavailable Entities'
      icon: 'mdi:server-network-off'
      show_header_toggle: false
    filter:
      include:
        - state: 'unavailable'
      exclude:
        - group: 'group.ignored_entities'
        - attributes:
            restored: true
    sort:
      method: 'name'

  - type: 'custom:auto-entities'
    card:
      type: 'entities'
      title: 'Restored Entities'
      icon: 'mdi:restore-alert'
      show_header_toggle: false
    filter:
      include:
        - attributes:
            restored: true
    sort:
      method: 'name'

  - type: 'custom:auto-entities'
    card:
      type: 'entities'
      title: 'Entities without Area'
      show_header_toggle: false
    filter:
      template: >-
        {%
          set excluded_integrations = [
            'aussie_broadband',
            'bureau_of_meteorology',
            'cloud',
            'daikin',
            'dnsip',
            'hacs',
            'hassio',
            'mobile_app',
            'netgear_lte',
            'speedtestdotnet',
            'systemmonitor',
            'unifi_network',
            'updater',
            'uptime',
            'version',
            'workday',
            'zoom',
          ]
        %}
        {%
          set integrations_without_unique_id = [
            'min_max',
            'ping',
          ]
        %}
        {% set excluded_entities = (excluded_integrations + integrations_without_unique_id) | map('integration_entities') | sum(start=[]) %}
        {{ states | map(attribute='entity_id') | reject('in', excluded_entities) | list }}

      exclude:
        - area: '*'

        - entity_id: 'binary_sensor.all_*'
        - entity_id: 'binary_sensor.backups_stale'
        - entity_id: 'binary_sensor.external_*'
        - entity_id: 'binary_sensor.internal_*'
        - entity_id: 'binary_sensor.zigbee2mqtt_*'
        - entity_id: 'media_player.all'
        - entity_id: 'sensor.backup_state'
        - entity_id: 'sensor.firmware_updates_available'
        - entity_id: 'sensor.low_battery'
        - entity_id: 'sensor.mosquitto_*'
        - entity_id: 'sensor.unavailable_entities'
        - entity_id: 'sensor.unifi_*'
        - entity_id: 'sensor.zigbee2mqtt_*'
        - entity_id: 'switch.*_do_not_disturb'

        - domain: 'alarm_control_panel'
        - domain: 'automation'
        - domain: 'device_tracker'
        - domain: 'group'
        - domain: 'persistent_notification'
        - domain: 'person'
        - domain: 'scene'
        - domain: 'script'
        - domain: 'sun'
        - domain: 'vacuum'
        - domain: 'weather'
        - domain: 'zone'
    sort:
      method: 'name'

  - type: 'entity'
    entity: 'binary_sensor.remote_ui'

  - type: 'entities'
    title: 'Updates'
    entities:
      - type: 'section'
        label: 'Home Assistant'
      - entity: 'sensor.hass_newest_version'
        name: 'Newest Version'
      - entity: 'binary_sensor.hass_update_available'
        name: 'Update Available'

      - type: 'section'
        label: 'Operating System'
      - entity: 'sensor.hassos_version'
        name: 'Current Version'
      - entity: 'sensor.hassos_newest_version'
        name: 'Newest Version'
      - entity: 'binary_sensor.hassos_update_available'
        name: 'Update Available'

      - type: 'section'
        label: 'HACS'
      - entity: 'sensor.hacs'
        name: 'Updates'

  - type: 'entities'
    title: 'Snapshots'
    icon: 'mdi:backup-restore'
    entities:
      - entity: 'binary_sensor.backups_stale'
        name: 'Staleness'
      - entity: 'sensor.backup_state'
        name: 'State'

  - type: 'entities'
    title: 'Add-ons'
    entities:
      - type: 'section'
        label: 'ESPHome'
      - entity: 'binary_sensor.esphome_running'
        name: 'Running'
      - entity: 'sensor.esphome_cpu_percent'
        name: 'CPU'
      - entity: 'sensor.esphome_memory_percent'
        name: 'Memory'

      - type: 'section'
        label: 'Google Drive Backup'
      - entity: 'binary_sensor.google_drive_backup_running'
        name: 'Running'
      - entity: 'sensor.google_drive_backup_cpu_percent'
        name: 'CPU'
      - entity: 'sensor.google_drive_backup_memory_percent'
        name: 'Memory'

      - type: 'section'
        label: 'Mosquitto'
      - entity: 'binary_sensor.mosquitto_running'
        name: 'Running'
      - entity: 'sensor.mosquitto_cpu_percent'
        name: 'CPU'
      - entity: 'sensor.mosquitto_memory_percent'
        name: 'Memory'

      - type: 'section'
        label: 'Terminal & SSH'
      - entity: 'binary_sensor.terminal_ssh_running'
        name: 'Running'
      - entity: 'sensor.terminal_ssh_cpu_percent'
        name: 'CPU'
      - entity: 'sensor.terminal_ssh_memory_percent'
        name: 'Memory'

      - type: 'section'
        label: 'Zigbee2MQTT'
      - entity: 'binary_sensor.zigbee2mqtt_running'
        name: 'Running'
      - entity: 'sensor.zigbee2mqtt_cpu_percent'
        name: 'CPU'
      - entity: 'sensor.zigbee2mqtt_memory_percent'
        name: 'Memory'

  - type: 'markdown'
    content: |-
      {% for device in states | map(attribute='entity_id') | map('device_id') | unique | reject('none') %}
      <details>
        <summary>
          <a href="/config/devices/device/{{ device }}">{{ device_attr(device, 'name_by_user') | default(device_attr(device, 'name'), true) }}</a>
        </summary>

        <table>
          <tbody>
            <tr>
              <td>Manufacturer</td>
              <td>{{ device_attr(device, 'manufacturer') }}</td>
            </tr>
            <tr>
              <td>Model</td>
              <td>{{ device_attr(device, 'model') }}</td>
            </tr>
            <tr>
              <td>Area</td>
              <td>{{ area_name(device) }}</td>
            </tr>
            <tr>
              <td>Entities</td>
              <td>
                <ul>
                  {% for entity in device_entities(device) | sort %}<li>{{ entity }}</li>{% endfor %}
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </details>
      {% endfor %}
    title: 'Devices'
